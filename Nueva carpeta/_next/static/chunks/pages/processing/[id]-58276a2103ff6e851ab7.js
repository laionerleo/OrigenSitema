_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[96],{"86RA":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/processing/[id]",function(){return a("ZEgi")}])},ZEgi:function(e,t,a){"use strict";a.r(t);var r=a("xvhg"),l=a("jT3O"),i=a("q1tI"),o=a.n(i),n=a("jRMg"),c=a("nOHt"),u=a("DFyN"),s=a("VreA"),d=a("6nGu"),f=a("5zZm"),m=(a("b1/7"),a("nqad"),a("33Fu")),b=a("wd/R"),h=a.n(b),v=a("z0WU"),p=a("z7pX"),w=a("gWdR"),D=a("Cs6D"),g=a("KYPV"),O=a("UGp+"),F=a("y2g3"),j=a.n(F),N=o.a.createElement;function Y(e){return e.isBefore(h()())}var E={startDate:h()().subtract(5,"days"),endDate:h()(),estudio:null},x=O.f({startDate:O.c(),endDate:O.c(),estudio:O.f().required("Este campo es requerido")}),S=function(e){var t=e.CBSetRows,a=e.CBLoading,l=e.areaID,c=e.state,u=Object(n.c)(s.F),d=Object(r.a)(u,1)[0],f=Object(n.c)(s.C),m=Object(r.a)(f,1)[0],b=Object(i.useState)(!1),v=(b[0],b[1],Object(i.useState)([])),O=v[0],F=v[1],S=Object(i.useState)(!1),y=S[0],I=S[1],M=function(e){a(!1),I(!0),m({variables:e}).then((function(e){var r=e.data;e.error;r&&r.getEstudiosByAreaEstudio&&(t(r.getEstudiosByAreaEstudio),I(!1)),a(!0)}))},C=Object(g.b)({initialValues:E,validationSchema:x,onSubmit:function(e){var t="all"!==e.estudio.id?{areaEstudio:l,estado:c,estudioID:e.estudio.id,params:{startDate:e.startDate.format("YYYY-MM-DD"),endDate:e.endDate.format("YYYY-MM-DD")}}:{areaEstudio:l,estado:c,params:{startDate:e.startDate.format("YYYY-MM-DD"),endDate:e.endDate.format("YYYY-MM-DD")}};M(t)}});return Object(i.useEffect)((function(){l&&d({variables:{params:{areaDeEstudioID:l}}}).then((function(e){var t=e.data;e.error,t.getEstudios&&(F([].concat(Object(p.a)(t.getEstudios),[{id:"all",nombre:"Todos"}])),C.setFieldValue("estudio",{id:"all",nombre:"TODOS"}),setTimeout((function(){M({areaEstudio:l,estado:c,params:{startDate:C.values.startDate.format("YYYY-MM-DD"),endDate:C.values.endDate.format("YYYY-MM-DD")}})}),300))}))}),[l]),N(w.a,{title:"Filtrar Estudios",description:""},N("form",{onSubmit:C.handleSubmit,className:"flex flex-col lg:flex-row lg:flex-wrap w-full"},N("div",{className:"w-full sm:w-full md:w-full lg:w-1/3 xl:w-1/3 pl-3 self-center"},N("div",{className:"form-element"},N("div",{className:"form-label"},"Seleccione el tipo de prueba:"),N(D.a,{name:"estudio",placeholder:"Seleccione un estudio...",options:O,value:C.values.estudio,getOptionLabel:function(e){return e.nombre},getOptionValue:function(e){return e.id},onChange:function(e){e?C.setFieldValue("estudio",e):C.setFieldValue("estudio",null)}}),C.errors.estudio&&C.touched.estudio?N("div",{className:"form-error"},"Este campo es requerido"):null)),N(o.a.Fragment,null,N("div",{className:"w-full sm:w-full md:w-full lg:w-1/4 xl:w-1/4 pl-3"},N("div",{className:"form-element"},N("div",{className:"form-label"},"Inicio"),N(j.a,{locale:"es",name:"startDate",dateFormat:"DD-MM-YYYY",timeFormat:!1,isValidDate:Y,input:!0,closeOnSelect:!0,inputProps:{className:"form-input",placeholder:"Fecha Inicio"},style:{width:"150px"},viewMode:"days",value:C.values.startDate,onChange:function(e){C.setFieldValue("startDate",e)}}))),N("div",{className:"w-full sm:w-full md:w-full lg:w-1/4 xl:w-1/4 pl-3"},N("div",{className:"form-element"},N("div",{className:"form-label"},"Fin"),N(j.a,{locale:"es",name:"endDate",dateFormat:"DD-MM-YYYY",timeFormat:!1,isValidDate:function(e){var t=h()(C.values.startDate).subtract(1,"day");return e.isBetween(t,h()())},input:!0,closeOnSelect:!0,inputProps:{className:"form-input",placeholder:"Fecha Fin"},viewMode:"days",value:C.values.endDate,onChange:function(e){C.setFieldValue("endDate",e)}})))),N("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3 self-center"},N("div",{className:"m-auto"},N("button",{className:"inline-block px-6 py-2 my-2 text-xs font-medium leading-6 text-center text-white uppercase transition bg-blue-700 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-800 focus:outline-none mx-auto",type:"submit"},y?N("svg",{className:" inline-block animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},N("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),N("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})):null,y?"Buscando ":"Buscar ")))))},y=a("qGs6"),I=a.n(y),M=a("qKvR"),C=o.a.createElement;function A(){var e=Object(l.a)(['\n  display: block;\n  margin: 0 auto;\n  border-color: "#000";\n']);return A=function(){return e},e}var P=Object(M.css)(A()),_={reactiveData:!0,layout:"fitColumns",pagination:"local",paginationSize:30};t.default=Object(u.a)((function(){var e,t=Object(n.c)(s.w),a=Object(r.a)(t,1)[0],l=Object(n.c)(s.C),o=Object(r.a)(l,1)[0],u=Object(i.useState)(!0),b=u[0],p=u[1],w=Object(i.useState)(null),D=w[0],g=w[1],O=Object(i.useState)([]),F=O[0],j=O[1],N=Object(i.useState)([]),Y=N[0],E=N[1],x=Object(i.useState)(!1),y=x[0],M=x[1],A=Object(c.useRouter)(),q=A.query,R=q.id,B=q.estado,V=function(e){var t=e.cell._cell.row.data;e.cell._cell.value;return C("div",null,C("button",{className:"inline-block p-1 text-center mx-1 text-white transition bg-blue-500 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-600 focus:outline-none",onClick:function(){A.push("/processing/estudio/".concat(t.id))}},C(m.e,null)))},z=function(e){var t=e.camposEstudio,a=e.estudioID.codigo,r=h()(e.estudioID.fechaSolicitud).utc();if(["PCRCS","PCRC","C","ANTU","AA","ASC"].includes(a))return Object(v.q)(t,"resultado");if("E"===a||"ELICOV"===a){if(h()(r.format("YYYY-MM-DD")).isSameOrAfter("2022-01-15"))return"IGG: ".concat(Object(v.q)(t,"resultado_igg")," | IGM: ").concat(Object(v.q)(t,"resultado_igm"));if(h()(r.format("YYYY-MM-DD")).isSameOrBefore("2022-01-14"))return"IGG: ".concat(Object(v.m)(t,"resultado_igg")," | IGM: ").concat(Object(v.m)(t,"resultado_igm"))}if("ANT"===a){var l=Object(v.b)(Object(v.q)(t,"valor_muestra"),Object(v.q)(t,"cutoff"),h()()),i=Object(v.k)(l);return"".concat(i)}if("AN"===a){if(r.isSameOrBefore("2021-11-25")){var o=Object(v.a)(Object(v.q)(t,"valor_muestra"),Object(v.q)(t,"cutoff")),n=Object(v.g)(o);return"".concat(o,"%    ").concat(n," ")}var c=Object(v.b)(Object(v.q)(t,"valor_muestra"),Object(v.q)(t,"cutoff"),h()()),u=Object(v.k)(c);return"".concat(u)}return""};Object(f.reactFormatter)(C(V,null));return Object(i.useEffect)((function(){p(!0),E([]),a({variables:{id:R}}).then((function(e){var t=e.data;if(e.error,t&&t.getAreaEstudio){var a=[];a.push({title:"Inicio",url:"/dashboard",last:!1}),a.push({title:"Estudios de ".concat(t.getAreaEstudio.nombre," ").concat(B),url:"/processing/".concat(R,"?estado=").concat(B),last:!0}),j(a),g(t.getAreaEstudio),p(!1)}})),"PROCESADO"!==B&&(p(!0),M(!1),o({variables:{areaEstudio:R,estado:B}}).then((function(e){var t=e.data;e.error,t&&t.getEstudiosByAreaEstudio&&(E(t.getEstudiosByAreaEstudio),p(!1),setTimeout((function(){M(!0)}),250))})))}),[A.query]),D?b?C("div",null,C("div",{className:"flex flex-row mb-4"},C("div",{className:"w-full"},C(d.a,{items:F,home:!0,icon:"arrow"}))),C("div",{className:"w-full px-4"},C("div",null,C(I.a,{css:P,size:80,color:"#000"})))):C("div",null,C("div",{className:"w-full px-4"},C("div",{className:"flex flex-row mb-4"},C("div",{className:"w-full"},C(d.a,{items:F,home:!0,icon:"arrow"}))),"PROCESADO"===B&&C(S,{CBSetRows:E,CBLoading:M,areaID:R,state:B})),!y&&C("div",{className:"w-full px-4"},C("div",null,C(I.a,{css:P,size:80,color:"#000"}))),y&&Y.length>0?C("div",{className:"w-full "},C(f.ReactTabulator,{ref:function(e){return e},columns:(e=R,["604120cf37b33573a7b70c21","60b95853092ae30004224dd9"].includes(e)&&"PROCESADO"===B?[{title:"",field:"custom",headerSort:!1,width:60,hozAlign:"center",formatter:Object(f.reactFormatter)(C(V,null))},{title:"Codigo Interno",field:"codigoInterno",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:160},{title:"Resultado",field:"result",mutator:function(e,t,a,r,l){return z(t)},headerFilter:"input",headerFilterPlaceholder:"Filtrar"},{title:"Orden #",field:"ordenNo",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:120},{title:"Estudio #",field:"codigoEstudio",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:120,mutator:function(e,t,a,r,l){return"".concat(t.estudioID.codigo).concat(t.estudioNumero)}},{title:"Fecha",field:"fechaSolicitud",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:120,mutator:function(e,t,a,r,l){return"".concat(h()(t.fechaSolicitud).utc().format("DD/MM/YYYY"))}},{title:"Estudio",field:"estudio",mutator:function(e,t,a,r,l){return t.estudioID.nombre},headerFilter:"input",headerFilterPlaceholder:"Filtrar"},{title:"Paciente",field:"paciente",mutator:function(e,t,a,r,l){var i,o;return"".concat(null===(i=t.ordenID)||void 0===i||null===(o=i.clientID)||void 0===o?void 0:o.nombres," ").concat(t.ordenID.clientID.apellidos)},headerFilter:"input",headerFilterPlaceholder:"Filtrar"}]:[{title:"",field:"custom",headerSort:!1,width:60,hozAlign:"center",formatter:Object(f.reactFormatter)(C(V,null))},{title:"Codigo Interno",field:"codigoInterno",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:160},{title:"Orden #",field:"ordenNo",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:120},{title:"Estudio #",field:"codigoEstudio",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:120,mutator:function(e,t,a,r,l){return"".concat(t.estudioID.codigo).concat(t.estudioNumero)}},{title:"Fecha",field:"fechaSolicitud",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:120,mutator:function(e,t,a,r,l){return"".concat(h()(t.fechaSolicitud).utc().format("DD/MM/YYYY"))}},{title:"Estudio",field:"estudio",mutator:function(e,t,a,r,l){return t.estudioID.nombre},headerFilter:"input",headerFilterPlaceholder:"Filtrar"},{title:"Paciente",field:"paciente",mutator:function(e,t,a,r,l){var i,o;return"".concat(null===(i=t.ordenID)||void 0===i||null===(o=i.clientID)||void 0===o?void 0:o.nombres," ").concat(t.ordenID.clientID.apellidos)},headerFilter:"input",headerFilterPlaceholder:"Filtrar"}]),data:Y,options:_})):null,y&&0===Y.length?C("div",{className:"w-full text-center mt-6"},C("h1",{className:"text-4xl text-blue-500 mb-4"},"No hay resultados"),C("div",{className:"mb-8 text-center text-gray-900"},"No se encontraron estudios de ",C("strong",null,D.nombre)," con el estado ",C("strong",null,B)," y los parametros consultados.")):null):C("div",null,C("div",{className:"flex flex-row mb-4"},C("div",{className:"w-full"},C(d.a,{items:F,home:!0,icon:"arrow"}))),C("div",{className:"w-full px-4"},C("div",null,C(I.a,{css:P,size:80,color:"#000"}))))}))},z7pX:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a("6FTQ");var l=a("8rE2");function i(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(l.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},zLVn:function(e,t,a){"use strict";function r(e,t){if(null==e)return{};var a,r,l={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(l[a]=e[a]);return l}a.d(t,"a",(function(){return r}))}},[["86RA",0,1,4,10,5,11,7,20,22,2,3,6,8,9,12,14,15,16,17,19,18,21,23]]]);