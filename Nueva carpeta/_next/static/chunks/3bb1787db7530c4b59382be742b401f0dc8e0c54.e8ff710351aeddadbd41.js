(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[37],{EA43:function(e,t,l){"use strict";var o=l("cpVT"),r=l("z7pX"),a=l("xvhg"),i=l("q1tI"),n=l.n(i),s=l("KYPV"),c=l("UGp+"),u=l("jRMg"),d=l("gWdR"),m=l("Cs6D"),p=l("9rZX"),f=l.n(p),b=l("IqVg"),v=l("VreA"),g=n.a.createElement;function h(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,o)}return l}function w(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?h(Object(l),!0).forEach((function(t){Object(o.a)(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):h(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var y={nombre:"",estatus:"",estudios:[],tipo_cliente_selected:"",tipo_cliente:{}},N={estudio:"",precio:""},x={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"50%",width:"50%",background:"transparent",padding:"10px",border:"none"},overlay:{background:"rgba(217, 218, 218, 0.8)"}};t.a=function(e){var t=e.perfil,l=e.onSubmit,o=e.loading,n=Object(i.useState)([]),p=n[0],h=n[1],O=Object(i.useState)(!1),j=O[0],C=O[1],E=Object(i.useState)(""),_=E[0],P=E[1],S=Object(i.useState)([]),V=S[0],k=S[1],A=Object(i.useState)(null),I=A[0],q=A[1],T=Object(u.c)(v.Y),D=Object(a.a)(T,1)[0],F=Object(u.c)(v.U),R=Object(a.a)(F,1)[0],z=Object(i.useState)([]),L=z[0],M=z[1],B=c.f({nombre:c.h().required("Este campo es requerido"),estatus:c.h().required("Este campo es requerido"),estudios:c.a().min(1),tipo_cliente_selected:c.h().required("Este campo es requerido"),tipo_cliente:c.f().required("Este campo es requerido")}),W=c.f({estudio:c.f().required("Este campo es requerido"),precio:c.e().required("Este campo es requerido")}),H=Object(s.b)({initialValues:t||y,validationSchema:B,onSubmit:l,validateOnMount:!!t,enableReinitialize:!0}),U=Object(s.b)({initialValues:N,validationSchema:W,onSubmit:function(e){var t=e.estudio,l=e.precio,o={nombre:t.estudioID.nombre,id:t.estudioID.id,precio:l.toString()};p.length>0?p.filter((function(e){return e.id===t.estudioID.id})).length>0?Object(b.a)("error","El estudio ya se encuentra en la lista."):(h([].concat(Object(r.a)(p),[o])),Object(b.a)("success","El estudio se agreg\xf3.")):(Object(b.a)("success","El estudio se agreg\xf3."),h([o]))}});Object(i.useEffect)((function(){H.setFieldValue("estudios",p)}),[p]),Object(i.useEffect)((function(){t&&(h(t.estudios),X(t.tipo_cliente_selected),G(t.tipo_cliente.id),q(t.tipo_cliente.id))}),[]);var X=function(e){D({variables:{tipo:e}}).then((function(e){var t=e.data;t.getProveedoresByTipo&&k(t.getProveedoresByTipo)}))},G=function(e){R({variables:{id:e}}).then((function(e){var t=e.data;e.error;t.getPreciosPorProveedor&&M(t.getPreciosPorProveedor)}))};return g("form",{onSubmit:H.handleSubmit,className:"flex flex-col lg:flex-row lg:flex-wrap w-full"},g("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3"},g("div",{className:"form-element"},g("div",{className:"form-label"},"Nombre"),g("input",{name:"nombre",type:"text",className:"focus:outline-none form-input ".concat(H.errors.nombre?"form-input-invalid":""," "),placeholder:"",onChange:H.handleChange,value:H.values.nombre}),H.errors.nombre&&H.touched.nombre?g("div",{className:"form-error"},H.errors.nombre):null)),g("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3"},g("div",{className:"form-element"},g("div",{className:"form-label"},"Estatus"),g("select",{className:"form-select spacing-4 ".concat(H.errors.estatus?"form-input-invalid":""),name:"estatus",placeholder:"Seleccione",onChange:H.handleChange,value:H.values.estatus},g("option",{value:""},"Seleccione una opcion"),g("option",{value:"ACTIVO"},"ACTIVO"),g("option",{value:"INACTIVO"},"INACTIVO")),H.errors.estatus&&H.touched.estatus?g("div",{className:"form-error"},H.errors.estatus):null)),g("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3"},g("div",{className:"form-element"},g("div",{className:"form-label"},"Tipo de cliente"),g("select",{className:"form-select",name:"tipo_cliente_selected",placeholder:"Seleccione",onChange:function(e){H.handleChange(e),q(null),X(e.target.value),H.setFieldValue("tipo_cliente",{}),H.setFieldValue("estudios",[]),h([])},value:H.values.tipo_cliente_selected},g("option",{value:""},"Seleccione una opcion"),g("option",{value:"PARTICULAR"},"Particular"),g("option",{value:"EMPRESA"},"Empresa"),g("option",{value:"MEDICO"},"Medico"),g("option",{value:"CONVENIO"},"Convenio")),H.errors.tipo_cliente_selected&&H.touched.tipo_cliente_selected?g("div",{className:"form-error"},H.errors.tipo_cliente_selected):null)),H.values.tipo_cliente_selected?g("div",{className:"w-2/4 mt-3 pl-3"},g("div",{className:"form-element"},g("div",{className:"form-label"},"Lista de ",H.values.tipo_cliente_selected,"S "),g(m.a,{name:"tipo_cliente",options:V,getOptionLabel:function(e){return e.nombre},getOptionValue:function(e){return e.id},onChange:function(e){H.values.tipo_cliente!==e&&(G(e.id),H.setFieldValue("estudios",[]),h([]),H.setFieldValue("tipo_cliente",e),q(e.id),U.setFieldValue("estudio",{}))},value:H.values.tipo_cliente}))):null,I&&L.length>0?g(d.a,{title:"",description:g("span",null,"A\xf1adir Estudio y Precio")},g("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-2/5 pl-3"},g("div",{className:"form-element"},g("div",{className:"form-label"},"Lista Estudios"),g(m.a,{name:"estudio",placeholder:"Seleccione",options:L,getOptionLabel:function(e){return e.estudioID.nombre},getOptionValue:function(e){return e.id},value:U.estudio,onChange:function(e){e?(U.setFieldValue("estudio",e),U.setFieldValue("precio",e.precio)):(U.setFieldValue("estudio",{}),U.setFieldValue("precio",0))}}),U.errors.estudio&&U.touched.estudio?g("div",{className:"form-error"},U.errors.estudio):null)),g("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3"},g("div",{className:"form-element"},g("div",{className:"form-label"},"Precio"),g("input",{name:"precio",type:"number",className:"focus:outline-none form-input ".concat(U.errors.precio?"form-input-invalid":""," "),placeholder:"",onChange:U.handleChange,value:U.values.precio}),U.errors.precio&&U.touched.precio?g("div",{className:"form-error"},U.errors.precio):null)),g("div",{className:"flex w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3 justify-start mt-2"},g("div",{className:"my-auto"},g("button",{className:"inline-block px-6 py-2 my-2 text-xs font-medium leading-6 text-center text-white uppercase transition bg-blue-700 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-800 focus:outline-none mx-auto",type:"button",onClick:U.handleSubmit},"Agregar")))):null,g(d.a,{title:"",description:g("span",null,"Lista de Estudios en Perfil ")},p.length>0?g("div",{className:"flex flex-col w-full"},g("div",{className:"overflow-x-scroll lg:overflow-hidden"},g("table",{className:"table"},g("thead",null,g("tr",null,g("th",null,"Estudio"),g("th",null,"Precio"),g("th",null,"Acciones"))),g("tbody",null,p.map((function(e,t){return g("tr",{key:t},g("td",null,e.nombre),g("td",null,e.precio),g("td",null,g("a",{onClick:function(t){P(e),C(!0)}},"Editar")," | ",g("a",{onClick:function(e){return function(e){var t=Object(r.a)(p);t.splice(e,1),h(t)}(t)}},"Eliminar")))})))))):g("h5",{className:"text-center"},"Aun no hay estudios seleccionados.")),g("div",{className:"w-full flex"},g("div",{className:"m-auto"},g("button",{className:"inline-block px-6 py-2 my-6 text-xs font-medium leading-6 text-center text-white uppercase transition bg-blue-700 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-800 focus:outline-none mx-auto",type:"submit"},o?g("svg",{className:" inline-block animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},g("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})):null,t?"Actualizar":"Crear"))),g(f.a,{isOpen:j,onRequestClose:function(){return C(!j)},style:x,contentLabel:"Example Modal",ariaHideApp:!1,shouldCloseOnOverlayClick:!1},g("div",{className:"relative w-auto lg:my-4 mx-auto lg:max-w-lg max-w-sm"},g("div",{className:"bg-white text-gray-900 border-gray-200 dark:bg-gray-800 dark:text-white dark:border-gray-700 border-0 rounded-lg shadow-lg relative flex flex-col w-full outline-none"},g("div",{className:"relative p-4 flex-auto"},g("div",{className:"flex items-start justify-start p-2 space-x-4"},g("div",{className:"flex flex-col w-full"},g("div",{className:"text-md mb-2 font-bold"},"Ingrese el precio actualizado"))),g("div",{className:"w-full pl-3"},g("div",{className:"form-element"},g("div",{className:"form-label"},"Precio"),g("input",{name:"precioEdit",type:"number",className:"focus:outline-none form-input ".concat(_.precio?"":"form-input-invalid"," "),placeholder:"",onChange:function(e){P(w(w({},_),{},{precio:e.target.value}))},value:_.precio})))),g("div",{className:"flex items-center justify-end p-4 border-t border-gray-200 dark:border-gray-700 border-solid rounded-b space-x-2"},g("button",{className:"btn btn-default btn-rounded bg-white hover:bg-gray-100 text-gray-900",type:"button",onClick:function(e){return C(!j)}},"Cancelar"),g("button",{className:"btn btn-default btn-rounded bg-yellow-500 hover:bg-yellow-600 text-white",type:"button",onClick:function(){_.precio?function(e){var t=p.map((function(t){return t.id===e.id?e:t}));C(!1),h(t)}(_):Object(b.a)("error","El precio no puede estar vacio")}},"Actualizar"))))))}},IqVg:function(e,t,l){"use strict";l.d(t,"a",(function(){return r}));l("wd/R");var o=l("FGyW"),r=(l("jDDT"),function(e,t){o.b[e](t,{position:"top-right",autoClose:"error"===e?4e3:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0})})},cpVT:function(e,t,l){"use strict";function o(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}l.d(t,"a",(function(){return o}))},gWdR:function(e,t,l){"use strict";var o=l("q1tI"),r=l.n(o).a.createElement;t.a=function(e){var t=e.title,l=void 0===t?null:t,o=e.description,a=void 0===o?null:o,i=e.right,n=void 0===i?null:i,s=e.children;return r("div",{className:"widget w-full p-4 mb-4 rounded-lg bg-white border border-gray-100 dark:bg-gray-900 dark:border-gray-800"},(l||a||n)&&r("div",{className:"flex flex-row items-center justify-between mb-6"},r("div",{className:"flex flex-col"},r("div",{className:"text-sm font-light text-gray-500"},l),r("div",{className:"text-sm font-bold"},a)),n),s)}},z7pX:function(e,t,l){"use strict";l.d(t,"a",(function(){return a}));var o=l("6FTQ");var r=l("8rE2");function a(e){return function(e){if(Array.isArray(e))return Object(o.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);