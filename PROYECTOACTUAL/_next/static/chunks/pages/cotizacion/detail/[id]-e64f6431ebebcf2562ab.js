_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[64],{"3Xey":function(e,t,a){"use strict";a.r(t);a("z7pX"),a("cpVT");var l=a("xvhg"),o=a("jT3O"),i=a("q1tI"),r=a.n(i),n=a("jRMg"),s=a("nOHt"),c=a.n(s),d=a("YFqc"),u=a.n(d),m=a("DFyN"),f=a("VreA"),b=a("iX8M"),x=a("6nGu"),v=a("gWdR"),g=a("7qI8"),p=(a("B3WN"),a("TCCB")),N=a("wd/R"),h=a.n(N),w=a("z0WU"),y=a("qGs6"),j=a.n(y),E=a("qKvR"),O=a("FLf1"),z=a.n(O),D=(a("D1Df"),a("KRtS"),a("IGOO")),I=(a("FNPF"),a("2kOW")),C=a("YwrL"),k=(a("ojc3"),a("IqVg")),T=(a("nyvF"),r.a.createElement);function S(){var e=Object(o.a)(['\n  display: block;\n  margin: 0 auto;\n  border-color: "#000";\n']);return S=function(){return e},e}var _=Object(E.css)(S());t.default=Object(m.a)((function(){var e=Object(n.c)(f.f),t=Object(l.a)(e,1)[0],a=Object(n.d)(b.m),o=Object(l.a)(a,1)[0],d=Object(i.useState)(!1),m=(d[0],d[1],Object(i.useState)(null)),N=m[0],y=m[1],E=Object(i.useState)(null),O=E[0],S=E[1],A=Object(i.useState)(0),F=(A[0],A[1],Object(s.useRouter)()),L=F.query.id,P=(Object(p.b)().userInformation,[{title:"Inicio",url:"/dashboard",last:!1},{title:"Buscar Cotizacion",url:"/buscar-cotizacion",last:!1},{title:"Detalle Cotizacion",url:"".concat(L),last:!0}]);return Object(i.useEffect)((function(){F.query.id&&t({variables:{id:L}}).then((function(e){var t=e.data,a=e.error;if(a){var l="Hubo un error al crear el estudio.";a.graphQLErrors&&a.graphQLErrors.length>0&&a.graphQLErrors.map((function(e){l+="\n".concat(e.message," ")})),Object(k.a)("error",l)}if(!t.getCotizacion)return Object(k.a)("error","La Cotizacion consultada no existe."),void c.a.push("/buscar-cotizacion");t&&t.getCotizacionDetalles&&S(t.getCotizacionDetalles),t&&t.getCotizacion&&y(t.getCotizacion)}))}),[F.query]),N?T("div",null,T("div",{className:"w-full px-4"},T("div",{className:"flex flex-row mb-4"},T("div",{className:"w-full"},T(x.a,{items:P,home:!0,icon:"arrow"}))),T("div",{className:"w-full py-2 px-0"},T(v.a,{title:"",description:T("span",null,"Datos de la Cotizacion ",N.cotizacionNumero),right:T(I.a,{permission:C.f.UPDATE_QUOTES},T(u.a,{href:"/cotizacion/edit/".concat(L)},T("a",{className:"link self-end"},"Editar Cotizacion")))},T("div",{className:"flex flex-col lg:flex-row lg:flex-wrap w-full lg:space-x-4"},T("div",{className:"flex flex-col w-3/4"},T("div",{className:"text-sm mb-1"},"No. de Cotizacion: ",N.cotizacionNumero),N.nombreMedico?T("div",{className:"text-sm mb-1"},"Medico Solicitante: ",N.nombreMedico):null,T("div",{className:"text-sm mb-1"},"Fecha Solicitud:"," ",h()(N.fechaSolicitud).utc().format("DD/MM/YYYY")),T(u.a,{href:"/proveedor/estudios/".concat(N.proveedorID.id),className:"text-sm mb-1"},T("div",{className:"text-sm mb-1"},"Tipo de Cliente:",T("a",{className:"link"}," ".concat(N.proveedorID.nombre)," ",N.contratista?"| ".concat(N.contratista):""))),T("div",{className:"text-sm mb-1"},"Descuento: ",N.porcentajeDescuento," %"),T("div",{className:"text-sm mb-1"},"Total Pagado: ",N.totalAPagar," Bs."),N.nota?T("div",{className:"text-sm mb-1"},"Nota/Informaci\xf3n clinica Relevante: ",N.nota):null),T("div",{className:"w-full mt-5"},T("button",{onClick:function(e){Object(w.d)(N,O)},className:"inline-block px-6 py-1 mx-auto mb-3 text-xs font-medium leading-6 text-center text-white uppercase transition bg-blue-700 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-800 focus:outline-none"},"Descargar Recibo")),T("div",{className:"w-full mt-2"},T(I.a,{permission:C.f.DELETE_QUOTES},T("button",{onClick:function(e){Object(D.confirmAlert)({customUI:function(e){var t=e.onClose;return T(r.a.Fragment,null,T("div",{className:"modal-backdrop fade-in"}),T("div",{className:"modal show ","data-background":"light"},T("div",{className:"relative w-auto lg:my-4 mx-auto lg:max-w-lg max-w-sm"},T("div",{className:"bg-white text-gray-900 border-gray-200 dark:bg-gray-800 dark:text-white dark:border-gray-700 border-0 rounded-lg shadow-lg relative flex flex-col w-full outline-none"},T("div",{className:"relative p-4 flex-auto"},T("div",{className:"flex items-start justify-start p-2 space-x-4"},T("div",{className:"flex flex-col w-full"},T("div",{className:"text-lg mb-2 font-bold"},"\xbfEstas seguro que deseas eliminar la cotizacion?")))),T("div",{className:"flex items-center justify-end p-4 border-t border-gray-200 dark:border-gray-700 border-solid rounded-b space-x-2"},T("button",{className:"btn btn-default btn-rounded bg-white hover:bg-gray-100 text-gray-900",type:"button",onClick:t},"Cancelar"),T("button",{className:"btn btn-default btn-rounded bg-red-500 hover:bg-red-600 text-white",type:"button",onClick:function(){t(),o({variables:{id:N.id}}).then((function(e){var t=e.data,a=e.error;if(a){console.log(a);var l="Hubo un error al tratar de eliminar la cotizacion.";return a.graphQLErrors&&a.graphQLErrors.length>0&&a.graphQLErrors.map((function(e){l+="\n".concat(e.message," ")})),void Object(k.a)("error",l)}t.deleteCotizacion&&(Object(k.a)("success","La Cotizacion fue eliminada correctamente."),F.push("/buscar-cotizacion"))}))}},"Eliminar"))))))}})},className:"inline-block px-6 py-1 mx-auto mb-3 text-xs font-medium leading-6 text-center text-white uppercase transition bg-red-700 rounded-full shadow ripple hover:shadow-lg hover:bg-red-800 focus:outline-none"},"Eliminar Cotizacion"))))),T(v.a,{title:"",description:T("span",null,"Datos del paciente"),right:T(I.a,{permission:C.f.UPDATE_PATIENTS},T(u.a,{href:"/pacientes/edit/".concat(N.clientID.id)},T("a",{className:"link self-end"},"Editar Paciente")))},T("div",{className:"flex flex-col lg:flex-row lg:flex-wrap w-full lg:space-x-4"},T("div",{className:"flex flex-col w-3/4"},T("div",{className:"text-sm mb-1"},"Nombres: ",N.clientID.nombres),T("div",{className:"text-sm mb-1"},"Apellidos: ",N.clientID.apellidos),T("div",{className:"text-sm mb-1"},"DNI: ",N.clientID.ci),T("div",{className:"text-sm mb-1"},"Telefono: ",N.clientID.telefono)))),T(v.a,{title:"",description:T("span",null,"Estudios Realizados")},T("div",{className:"flex flex-col w-full"},T("div",{className:"overflow-x-scroll lg:overflow-hidden"},T("table",{className:"table"},T("thead",null,T("tr",null,T("th",null,"Nombre"),T("th",null,"Precio"))),T("tbody",null,O.map((function(e){var t=z.a.sign({ordenId:N.id},"Hnw5I!*GRV4thHlQSdA7r2YV*5uTSvpFDtAJztyu");"https://vigilant-goldberg-714272.netlify.app/resultados-orden?key=".concat(t);return T("tr",{key:e.id},T("td",null,e.estudioID.nombre),T("td",null,e.precio))})))))),T("div",{className:"flex flex-col lg:flex-col lg:flex-wrap w-full mt-4 pr-5 justify-end"},T("div",{className:"d-flex flex-col ml-4"},T("h2",{className:"text-xl text-right self-end mb-2"},"Sub Total: ",O.reduce((function(e,t){return Number(e+t.precio)}),0)," Bs")),T("div",{className:"d-flex flex-col ml-4"},T("h2",{className:"text-xl text-right self-end mb-6"},"Descuento: ",N.porcentajeDescuento," %")),T("div",{className:"d-flex flex-col ml-4"},T("h2",{className:"text-xl text-right self-end mb-6"},"Total a pagar: ",N.totalAPagar," Bs")))),T(I.a,{permission:C.f.READ_ACTIVITY_LOGS},T(v.a,{title:"",description:T("span",null,"Historial")},T(g.a,{documentId:L,documentType:"cotizaciones"})))))):T("div",null,T("div",{className:"flex flex-row mb-4"},T("div",{className:"w-full"},T(x.a,{items:P,home:!0,icon:"arrow"}))),T("div",{className:"w-full px-4"},T("div",null,T(j.a,{css:_,size:80,color:"#000"}))))}))},FNPF:function(e,t,a){},G3l5:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cotizacion/detail/[id]",function(){return a("3Xey")}])},gWdR:function(e,t,a){"use strict";var l=a("q1tI"),o=a.n(l).a.createElement;t.a=function(e){var t=e.title,a=void 0===t?null:t,l=e.description,i=void 0===l?null:l,r=e.right,n=void 0===r?null:r,s=e.children;return o("div",{className:"widget w-full p-4 mb-4 rounded-lg bg-white border border-gray-100 dark:bg-gray-900 dark:border-gray-800"},(a||i||n)&&o("div",{className:"flex flex-row items-center justify-between mb-6"},o("div",{className:"flex flex-col"},o("div",{className:"text-sm font-light text-gray-500"},a),o("div",{className:"text-sm font-bold"},i)),n),s)}},z7pX:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var l=a("6FTQ");var o=a("8rE2");function i(e){return function(e){if(Array.isArray(e))return Object(l.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},[["G3l5",0,1,4,10,5,11,7,22,2,3,6,8,9,12,14,13,26,28,27]]]);