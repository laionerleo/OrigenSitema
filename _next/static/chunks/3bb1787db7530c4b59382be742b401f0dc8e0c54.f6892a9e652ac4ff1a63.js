(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[37],{EA43:function(e,t,l){"use strict";var i=l("rePB"),r=l("KQm4"),c=l("ODXe"),s=l("nKUr"),n=l("q1tI"),o=l("KYPV"),a=l("UGp+"),d=l("jRMg"),u=l("gWdR"),b=l("Cs6D"),j=l("9rZX"),m=l.n(j),p=l("IqVg"),h=l("VreA");function f(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,i)}return l}function x(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?f(Object(l),!0).forEach((function(t){Object(i.a)(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):f(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var O={nombre:"",estatus:"",estudios:[],tipo_cliente_selected:"",tipo_cliente:{}},v={estudio:"",precio:""},g={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"50%",width:"50%",background:"transparent",padding:"10px",border:"none"},overlay:{background:"rgba(217, 218, 218, 0.8)"}};t.a=function(e){var t=e.perfil,l=e.onSubmit,i=e.loading,j=Object(n.useState)([]),f=j[0],w=j[1],N=Object(n.useState)(!1),y=N[0],C=N[1],_=Object(n.useState)(""),E=_[0],P=_[1],S=Object(n.useState)([]),V=S[0],k=S[1],A=Object(n.useState)(null),I=A[0],q=A[1],D=Object(d.c)(h.Y),F=Object(c.a)(D,1)[0],R=Object(d.c)(h.U),T=Object(c.a)(R,1)[0],L=Object(n.useState)([]),M=L[0],z=L[1],B=a.f({nombre:a.h().required("Este campo es requerido"),estatus:a.h().required("Este campo es requerido"),estudios:a.a().min(1),tipo_cliente_selected:a.h().required("Este campo es requerido"),tipo_cliente:a.f().required("Este campo es requerido")}),U=a.f({estudio:a.f().required("Este campo es requerido"),precio:a.e().required("Este campo es requerido")}),K=Object(o.b)({initialValues:t||O,validationSchema:B,onSubmit:l,validateOnMount:!!t,enableReinitialize:!0}),W=Object(o.b)({initialValues:v,validationSchema:U,onSubmit:function(e){var t=e.estudio,l=e.precio,i={nombre:t.estudioID.nombre,id:t.estudioID.id,precio:l.toString()};f.length>0?f.filter((function(e){return e.id===t.estudioID.id})).length>0?Object(p.a)("error","El estudio ya se encuentra en la lista."):(w([].concat(Object(r.a)(f),[i])),Object(p.a)("success","El estudio se agreg\xf3.")):(Object(p.a)("success","El estudio se agreg\xf3."),w([i]))}});Object(n.useEffect)((function(){K.setFieldValue("estudios",f)}),[f]),Object(n.useEffect)((function(){t&&(w(t.estudios),H(t.tipo_cliente_selected),G(t.tipo_cliente.id),q(t.tipo_cliente.id))}),[]);var H=function(e){F({variables:{tipo:e}}).then((function(e){var t=e.data;t.getProveedoresByTipo&&k(t.getProveedoresByTipo)}))},G=function(e){T({variables:{id:e}}).then((function(e){var t=e.data;e.error;t.getPreciosPorProveedor&&z(t.getPreciosPorProveedor)}))};return Object(s.jsxs)("form",{onSubmit:K.handleSubmit,className:"flex flex-col lg:flex-row lg:flex-wrap w-full",children:[Object(s.jsx)("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3",children:Object(s.jsxs)("div",{className:"form-element",children:[Object(s.jsx)("div",{className:"form-label",children:"Nombre"}),Object(s.jsx)("input",{name:"nombre",type:"text",className:"focus:outline-none form-input ".concat(K.errors.nombre?"form-input-invalid":""," "),placeholder:"",onChange:K.handleChange,value:K.values.nombre}),K.errors.nombre&&K.touched.nombre?Object(s.jsx)("div",{className:"form-error",children:K.errors.nombre}):null]})}),Object(s.jsx)("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3",children:Object(s.jsxs)("div",{className:"form-element",children:[Object(s.jsx)("div",{className:"form-label",children:"Estatus"}),Object(s.jsxs)("select",{className:"form-select spacing-4 ".concat(K.errors.estatus?"form-input-invalid":""),name:"estatus",placeholder:"Seleccione",onChange:K.handleChange,value:K.values.estatus,children:[Object(s.jsx)("option",{value:"",children:"Seleccione una opcion"}),Object(s.jsx)("option",{value:"ACTIVO",children:"ACTIVO"}),Object(s.jsx)("option",{value:"INACTIVO",children:"INACTIVO"})]}),K.errors.estatus&&K.touched.estatus?Object(s.jsx)("div",{className:"form-error",children:K.errors.estatus}):null]})}),Object(s.jsx)("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3",children:Object(s.jsxs)("div",{className:"form-element",children:[Object(s.jsx)("div",{className:"form-label",children:"Tipo de cliente"}),Object(s.jsxs)("select",{className:"form-select",name:"tipo_cliente_selected",placeholder:"Seleccione",onChange:function(e){K.handleChange(e),q(null),H(e.target.value),K.setFieldValue("tipo_cliente",{}),K.setFieldValue("estudios",[]),w([])},value:K.values.tipo_cliente_selected,children:[Object(s.jsx)("option",{value:"",children:"Seleccione una opcion"}),Object(s.jsx)("option",{value:"PARTICULAR",children:"Particular"}),Object(s.jsx)("option",{value:"EMPRESA",children:"Empresa"}),Object(s.jsx)("option",{value:"MEDICO",children:"Medico"}),Object(s.jsx)("option",{value:"CONVENIO",children:"Convenio"})]}),K.errors.tipo_cliente_selected&&K.touched.tipo_cliente_selected?Object(s.jsx)("div",{className:"form-error",children:K.errors.tipo_cliente_selected}):null]})}),K.values.tipo_cliente_selected?Object(s.jsx)("div",{className:"w-2/4 mt-3 pl-3",children:Object(s.jsxs)("div",{className:"form-element",children:[Object(s.jsxs)("div",{className:"form-label",children:["Lista de ",K.values.tipo_cliente_selected,"S "]}),Object(s.jsx)(b.a,{name:"tipo_cliente",options:V,getOptionLabel:function(e){return e.nombre},getOptionValue:function(e){return e.id},onChange:function(e){K.values.tipo_cliente!==e&&(G(e.id),K.setFieldValue("estudios",[]),w([]),K.setFieldValue("tipo_cliente",e),q(e.id),W.setFieldValue("estudio",{}))},value:K.values.tipo_cliente})]})}):null,I&&M.length>0?Object(s.jsxs)(u.a,{title:"",description:Object(s.jsx)("span",{children:"A\xf1adir Estudio y Precio"}),children:[Object(s.jsx)("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-2/5 pl-3",children:Object(s.jsxs)("div",{className:"form-element",children:[Object(s.jsx)("div",{className:"form-label",children:"Lista Estudios"}),Object(s.jsx)(b.a,{name:"estudio",placeholder:"Seleccione",options:M,getOptionLabel:function(e){return e.estudioID.nombre},getOptionValue:function(e){return e.id},value:W.estudio,onChange:function(e){e?(W.setFieldValue("estudio",e),W.setFieldValue("precio",e.precio)):(W.setFieldValue("estudio",{}),W.setFieldValue("precio",0))}}),W.errors.estudio&&W.touched.estudio?Object(s.jsx)("div",{className:"form-error",children:W.errors.estudio}):null]})}),Object(s.jsx)("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3",children:Object(s.jsxs)("div",{className:"form-element",children:[Object(s.jsx)("div",{className:"form-label",children:"Precio"}),Object(s.jsx)("input",{name:"precio",type:"number",className:"focus:outline-none form-input ".concat(W.errors.precio?"form-input-invalid":""," "),placeholder:"",onChange:W.handleChange,value:W.values.precio}),W.errors.precio&&W.touched.precio?Object(s.jsx)("div",{className:"form-error",children:W.errors.precio}):null]})}),Object(s.jsx)("div",{className:"flex w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3 justify-start mt-2",children:Object(s.jsx)("div",{className:"my-auto",children:Object(s.jsx)("button",{className:"inline-block px-6 py-2 my-2 text-xs font-medium leading-6 text-center text-white uppercase transition bg-blue-700 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-800 focus:outline-none mx-auto",type:"button",onClick:W.handleSubmit,children:"Agregar"})})})]}):null,Object(s.jsx)(u.a,{title:"",description:Object(s.jsx)("span",{children:"Lista de Estudios en Perfil "}),children:f.length>0?Object(s.jsx)("div",{className:"flex flex-col w-full",children:Object(s.jsx)("div",{className:"overflow-x-scroll lg:overflow-hidden",children:Object(s.jsxs)("table",{className:"table",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Estudio"}),Object(s.jsx)("th",{children:"Precio"}),Object(s.jsx)("th",{children:"Acciones"})]})}),Object(s.jsx)("tbody",{children:f.map((function(e,t){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.nombre}),Object(s.jsx)("td",{children:e.precio}),Object(s.jsxs)("td",{children:[Object(s.jsx)("a",{onClick:function(t){P(e),C(!0)},children:"Editar"})," | ",Object(s.jsx)("a",{onClick:function(e){return function(e){var t=Object(r.a)(f);t.splice(e,1),w(t)}(t)},children:"Eliminar"})]})]},t)}))})]})})}):Object(s.jsx)("h5",{className:"text-center",children:"Aun no hay estudios seleccionados."})}),Object(s.jsx)("div",{className:"w-full flex",children:Object(s.jsx)("div",{className:"m-auto",children:Object(s.jsxs)("button",{className:"inline-block px-6 py-2 my-6 text-xs font-medium leading-6 text-center text-white uppercase transition bg-blue-700 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-800 focus:outline-none mx-auto",type:"submit",children:[i?Object(s.jsxs)("svg",{className:" inline-block animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Object(s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,t?"Actualizar":"Crear"]})})}),Object(s.jsx)(m.a,{isOpen:y,onRequestClose:function(){return C(!y)},style:g,contentLabel:"Example Modal",ariaHideApp:!1,shouldCloseOnOverlayClick:!1,children:Object(s.jsx)("div",{className:"relative w-auto lg:my-4 mx-auto lg:max-w-lg max-w-sm",children:Object(s.jsxs)("div",{className:"bg-white text-gray-900 border-gray-200 dark:bg-gray-800 dark:text-white dark:border-gray-700 border-0 rounded-lg shadow-lg relative flex flex-col w-full outline-none",children:[Object(s.jsxs)("div",{className:"relative p-4 flex-auto",children:[Object(s.jsx)("div",{className:"flex items-start justify-start p-2 space-x-4",children:Object(s.jsx)("div",{className:"flex flex-col w-full",children:Object(s.jsx)("div",{className:"text-md mb-2 font-bold",children:"Ingrese el precio actualizado"})})}),Object(s.jsx)("div",{className:"w-full pl-3",children:Object(s.jsxs)("div",{className:"form-element",children:[Object(s.jsx)("div",{className:"form-label",children:"Precio"}),Object(s.jsx)("input",{name:"precioEdit",type:"number",className:"focus:outline-none form-input ".concat(E.precio?"":"form-input-invalid"," "),placeholder:"",onChange:function(e){P(x(x({},E),{},{precio:e.target.value}))},value:E.precio})]})})]}),Object(s.jsxs)("div",{className:"flex items-center justify-end p-4 border-t border-gray-200 dark:border-gray-700 border-solid rounded-b space-x-2",children:[Object(s.jsx)("button",{className:"btn btn-default btn-rounded bg-white hover:bg-gray-100 text-gray-900",type:"button",onClick:function(e){return C(!y)},children:"Cancelar"}),Object(s.jsx)("button",{className:"btn btn-default btn-rounded bg-yellow-500 hover:bg-yellow-600 text-white",type:"button",onClick:function(){E.precio?function(e){var t=f.map((function(t){return t.id===e.id?e:t}));C(!1),w(t)}(E):Object(p.a)("error","El precio no puede estar vacio")},children:"Actualizar"})]})]})})})]})}},IqVg:function(e,t,l){"use strict";l.d(t,"a",(function(){return r}));l("wd/R");var i=l("FGyW"),r=(l("jDDT"),function(e,t){i.b[e](t,{position:"top-right",autoClose:"error"===e?4e3:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0})})},gWdR:function(e,t,l){"use strict";var i=l("nKUr");t.a=function(e){var t=e.title,l=void 0===t?null:t,r=e.description,c=void 0===r?null:r,s=e.right,n=void 0===s?null:s,o=e.children;return Object(i.jsxs)("div",{className:"widget w-full p-4 mb-4 rounded-lg bg-white border border-gray-100 dark:bg-gray-900 dark:border-gray-800",children:[(l||c||n)&&Object(i.jsxs)("div",{className:"flex flex-row items-center justify-between mb-6",children:[Object(i.jsxs)("div",{className:"flex flex-col",children:[Object(i.jsx)("div",{className:"text-sm font-light text-gray-500",children:l}),Object(i.jsx)("div",{className:"text-sm font-bold",children:c})]}),n]}),o]})}}}]);