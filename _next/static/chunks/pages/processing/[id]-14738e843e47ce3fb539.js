_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[97],{"86RA":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/processing/[id]",function(){return r("ZEgi")}])},ZEgi:function(e,t,r){"use strict";r.r(t);var a=r("xvhg"),i=r("jT3O"),l=r("nKUr"),c=r("q1tI"),o=r("jRMg"),n=r("nOHt"),s=r("DFyN"),d=r("VreA"),u=r("6nGu"),f=r("5zZm"),b=(r("b1/7"),r("nqad"),r("33Fu")),j=r("wd/R"),m=r.n(j),h=r("z0WU"),O=r("z7pX"),x=r("gWdR"),v=r("Cs6D"),p=r("KYPV"),w=r("UGp+"),D=r("y2g3"),g=r.n(D);function F(e){return e.isBefore(m()())}var N={startDate:m()().subtract(5,"days"),endDate:m()(),estudio:null},Y=w.f({startDate:w.c(),endDate:w.c(),estudio:w.f().required("Este campo es requerido")}),E=function(e){var t=e.CBSetRows,r=e.CBLoading,i=e.areaID,n=e.state,s=Object(o.c)(d.F),u=Object(a.a)(s,1)[0],f=Object(o.c)(d.C),b=Object(a.a)(f,1)[0],j=Object(c.useState)(!1),h=(j[0],j[1],Object(c.useState)([])),w=h[0],D=h[1],E=Object(c.useState)(!1),S=E[0],y=E[1],I=function(e){r(!1),y(!0),b({variables:e}).then((function(e){var a=e.data;e.error;a&&a.getEstudiosByAreaEstudio&&(t(a.getEstudiosByAreaEstudio),y(!1)),r(!0)}))},M=Object(p.b)({initialValues:N,validationSchema:Y,onSubmit:function(e){var t="all"!==e.estudio.id?{areaEstudio:i,estado:n,estudioID:e.estudio.id,params:{startDate:e.startDate.format("YYYY-MM-DD"),endDate:e.endDate.format("YYYY-MM-DD")}}:{areaEstudio:i,estado:n,params:{startDate:e.startDate.format("YYYY-MM-DD"),endDate:e.endDate.format("YYYY-MM-DD")}};I(t)}});return Object(c.useEffect)((function(){i&&u({variables:{params:{areaDeEstudioID:i}}}).then((function(e){var t=e.data;e.error,t.getEstudios&&(D([].concat(Object(O.a)(t.getEstudios),[{id:"all",nombre:"Todos"}])),M.setFieldValue("estudio",{id:"all",nombre:"TODOS"}),setTimeout((function(){I({areaEstudio:i,estado:n,params:{startDate:M.values.startDate.format("YYYY-MM-DD"),endDate:M.values.endDate.format("YYYY-MM-DD")}})}),300))}))}),[i]),Object(l.jsx)(x.a,{title:"Filtrar Estudios",description:"",children:Object(l.jsxs)("form",{onSubmit:M.handleSubmit,className:"flex flex-col lg:flex-row lg:flex-wrap w-full",children:[Object(l.jsx)("div",{className:"w-full sm:w-full md:w-full lg:w-1/3 xl:w-1/3 pl-3 self-center",children:Object(l.jsxs)("div",{className:"form-element",children:[Object(l.jsx)("div",{className:"form-label",children:"Seleccione el tipo de prueba:"}),Object(l.jsx)(v.a,{name:"estudio",placeholder:"Seleccione un estudio...",options:w,value:M.values.estudio,getOptionLabel:function(e){return e.nombre},getOptionValue:function(e){return e.id},onChange:function(e){e?M.setFieldValue("estudio",e):M.setFieldValue("estudio",null)}}),M.errors.estudio&&M.touched.estudio?Object(l.jsx)("div",{className:"form-error",children:"Este campo es requerido"}):null]})}),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"w-full sm:w-full md:w-full lg:w-1/4 xl:w-1/4 pl-3",children:Object(l.jsxs)("div",{className:"form-element",children:[Object(l.jsx)("div",{className:"form-label",children:"Inicio"}),Object(l.jsx)(g.a,{locale:"es",name:"startDate",dateFormat:"DD-MM-YYYY",timeFormat:!1,isValidDate:F,input:!0,closeOnSelect:!0,inputProps:{className:"form-input",placeholder:"Fecha Inicio"},style:{width:"150px"},viewMode:"days",value:M.values.startDate,onChange:function(e){M.setFieldValue("startDate",e)}})]})}),Object(l.jsx)("div",{className:"w-full sm:w-full md:w-full lg:w-1/4 xl:w-1/4 pl-3",children:Object(l.jsxs)("div",{className:"form-element",children:[Object(l.jsx)("div",{className:"form-label",children:"Fin"}),Object(l.jsx)(g.a,{locale:"es",name:"endDate",dateFormat:"DD-MM-YYYY",timeFormat:!1,isValidDate:function(e){var t=m()(M.values.startDate).subtract(1,"day");return e.isBetween(t,m()())},input:!0,closeOnSelect:!0,inputProps:{className:"form-input",placeholder:"Fecha Fin"},viewMode:"days",value:M.values.endDate,onChange:function(e){M.setFieldValue("endDate",e)}})]})})]}),Object(l.jsx)("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3 self-center",children:Object(l.jsx)("div",{className:"m-auto",children:Object(l.jsxs)("button",{className:"inline-block px-6 py-2 my-2 text-xs font-medium leading-6 text-center text-white uppercase transition bg-blue-700 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-800 focus:outline-none mx-auto",type:"submit",children:[S?Object(l.jsxs)("svg",{className:" inline-block animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Object(l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,S?"Buscando ":"Buscar "]})})})]})})},S=r("qGs6"),y=r.n(S),I=r("qKvR");function M(){var e=Object(i.a)(['\n  display: block;\n  margin: 0 auto;\n  border-color: "#000";\n']);return M=function(){return e},e}var C=Object(I.css)(M()),P={reactiveData:!0,layout:"fitColumns",pagination:"local",paginationSize:30};t.default=Object(s.a)((function(){var e,t=Object(o.c)(d.w),r=Object(a.a)(t,1)[0],i=Object(o.c)(d.C),s=Object(a.a)(i,1)[0],j=Object(c.useState)(!0),O=j[0],x=j[1],v=Object(c.useState)(null),p=v[0],w=v[1],D=Object(c.useState)([]),g=D[0],F=D[1],N=Object(c.useState)([]),Y=N[0],S=N[1],I=Object(c.useState)(!1),M=I[0],A=I[1],_=Object(n.useRouter)(),q=_.query,R=q.id,B=q.estado,V=function(e){var t=e.cell._cell.row.data;e.cell._cell.value;return Object(l.jsx)("div",{children:Object(l.jsx)("button",{className:"inline-block p-1 text-center mx-1 text-white transition bg-blue-500 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-600 focus:outline-none",onClick:function(){_.push("/processing/estudio/".concat(t.id))},children:Object(l.jsx)(b.e,{})})})},z=function(e){var t=e.camposEstudio,r=e.estudioID.codigo,a=m()(e.estudioID.fechaSolicitud).utc();if(["PCRCS","PCRC","C","ANTU","AA","ASC"].includes(r))return Object(h.q)(t,"resultado");if("E"===r||"ELICOV"===r){if(m()(a.format("YYYY-MM-DD")).isSameOrAfter("2022-01-15"))return"IGG: ".concat(Object(h.q)(t,"resultado_igg")," | IGM: ").concat(Object(h.q)(t,"resultado_igm"));if(m()(a.format("YYYY-MM-DD")).isSameOrBefore("2022-01-14"))return"IGG: ".concat(Object(h.m)(t,"resultado_igg")," | IGM: ").concat(Object(h.m)(t,"resultado_igm"))}if("ANT"===r){var i=Object(h.b)(Object(h.q)(t,"valor_muestra"),Object(h.q)(t,"cutoff"),m()()),l=Object(h.k)(i);return"".concat(l)}if("AN"===r){if(a.isSameOrBefore("2021-11-25")){var c=Object(h.a)(Object(h.q)(t,"valor_muestra"),Object(h.q)(t,"cutoff")),o=Object(h.g)(c);return"".concat(c,"%    ").concat(o," ")}var n=Object(h.b)(Object(h.q)(t,"valor_muestra"),Object(h.q)(t,"cutoff"),m()()),s=Object(h.k)(n);return"".concat(s)}return""};Object(f.reactFormatter)(Object(l.jsx)(V,{}));return Object(c.useEffect)((function(){x(!0),S([]),r({variables:{id:R}}).then((function(e){var t=e.data;if(e.error,t&&t.getAreaEstudio){var r=[];r.push({title:"Inicio",url:"/dashboard",last:!1}),r.push({title:"Estudios de ".concat(t.getAreaEstudio.nombre," ").concat(B),url:"/processing/".concat(R,"?estado=").concat(B),last:!0}),F(r),w(t.getAreaEstudio),x(!1)}})),"PROCESADO"!==B&&(x(!0),A(!1),s({variables:{areaEstudio:R,estado:B}}).then((function(e){var t=e.data;e.error,t&&t.getEstudiosByAreaEstudio&&(S(t.getEstudiosByAreaEstudio),x(!1),setTimeout((function(){A(!0)}),250))})))}),[_.query]),p?O?Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"flex flex-row mb-4",children:Object(l.jsx)("div",{className:"w-full",children:Object(l.jsx)(u.a,{items:g,home:!0,icon:"arrow"})})}),Object(l.jsx)("div",{className:"w-full px-4",children:Object(l.jsx)("div",{children:Object(l.jsx)(y.a,{css:C,size:80,color:"#000"})})})]}):Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"w-full px-4",children:[Object(l.jsx)("div",{className:"flex flex-row mb-4",children:Object(l.jsx)("div",{className:"w-full",children:Object(l.jsx)(u.a,{items:g,home:!0,icon:"arrow"})})}),"PROCESADO"===B&&Object(l.jsx)(E,{CBSetRows:S,CBLoading:A,areaID:R,state:B})]}),!M&&Object(l.jsx)("div",{className:"w-full px-4",children:Object(l.jsx)("div",{children:Object(l.jsx)(y.a,{css:C,size:80,color:"#000"})})}),M&&Y.length>0?Object(l.jsx)("div",{className:"w-full ",children:Object(l.jsx)(f.ReactTabulator,{ref:function(e){return e},columns:(e=R,["604120cf37b33573a7b70c21","60b95853092ae30004224dd9"].includes(e)&&"PROCESADO"===B?[{title:"",field:"custom",headerSort:!1,width:60,hozAlign:"center",formatter:Object(f.reactFormatter)(Object(l.jsx)(V,{}))},{title:"Codigo Interno",field:"codigoInterno",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:160},{title:"Resultado",field:"result",mutator:function(e,t,r,a,i){return z(t)},headerFilter:"input",headerFilterPlaceholder:"Filtrar"},{title:"Orden #",field:"ordenNo",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:120},{title:"Estudio #",field:"codigoEstudio",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:120,mutator:function(e,t,r,a,i){return"".concat(t.estudioID.codigo).concat(t.estudioNumero)}},{title:"Fecha",field:"fechaSolicitud",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:120,mutator:function(e,t,r,a,i){return"".concat(m()(t.fechaSolicitud).utc().format("DD/MM/YYYY"))}},{title:"Estudio",field:"estudio",mutator:function(e,t,r,a,i){return t.estudioID.nombre},headerFilter:"input",headerFilterPlaceholder:"Filtrar"},{title:"Paciente",field:"paciente",mutator:function(e,t,r,a,i){var l,c;return"".concat(null===(l=t.ordenID)||void 0===l||null===(c=l.clientID)||void 0===c?void 0:c.nombres," ").concat(t.ordenID.clientID.apellidos)},headerFilter:"input",headerFilterPlaceholder:"Filtrar"},{title:"Diagnostico",field:"diagnostico",mutator:function(){return"est\xe1tico"},headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:150}]:[{title:"",field:"custom",headerSort:!1,width:60,hozAlign:"center",formatter:Object(f.reactFormatter)(Object(l.jsx)(V,{}))},{title:"Codigo Interno",field:"codigoInterno",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:160},{title:"Orden #",field:"ordenNo",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:120},{title:"Estudio #",field:"codigoEstudio",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:120,mutator:function(e,t,r,a,i){return"".concat(t.estudioID.codigo).concat(t.estudioNumero)}},{title:"Fecha",field:"fechaSolicitud",headerFilter:"input",headerFilterPlaceholder:"Filtrar",width:120,mutator:function(e,t,r,a,i){return"".concat(m()(t.fechaSolicitud).utc().format("DD/MM/YYYY"))}},{title:"Estudio",field:"estudio",mutator:function(e,t,r,a,i){return t.estudioID.nombre},headerFilter:"input",headerFilterPlaceholder:"Filtrar"},{title:"Paciente",field:"paciente",mutator:function(e,t,r,a,i){var l,c;return"".concat(null===(l=t.ordenID)||void 0===l||null===(c=l.clientID)||void 0===c?void 0:c.nombres," ").concat(t.ordenID.clientID.apellidos)},headerFilter:"input",headerFilterPlaceholder:"Filtrar"}]),data:Y,options:P})}):null,M&&0===Y.length?Object(l.jsxs)("div",{className:"w-full text-center mt-6",children:[Object(l.jsx)("h1",{className:"text-4xl text-blue-500 mb-4",children:"No hay resultados"}),Object(l.jsxs)("div",{className:"mb-8 text-center text-gray-900",children:["No se encontraron estudios de ",Object(l.jsx)("strong",{children:p.nombre})," con el estado ",Object(l.jsx)("strong",{children:B})," y los parametros consultados."]})]}):null]}):Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"flex flex-row mb-4",children:Object(l.jsx)("div",{className:"w-full",children:Object(l.jsx)(u.a,{items:g,home:!0,icon:"arrow"})})}),Object(l.jsx)("div",{className:"w-full px-4",children:Object(l.jsx)("div",{children:Object(l.jsx)(y.a,{css:C,size:80,color:"#000"})})})]})}))},z7pX:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var a=r("6FTQ");var i=r("8rE2");function l(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},zLVn:function(e,t,r){"use strict";function a(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}r.d(t,"a",(function(){return a}))}},[["86RA",0,1,4,10,5,11,7,20,22,2,3,6,8,9,12,14,15,16,17,19,18,21,23]]]);