_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[84],{"8apA":function(e,t,n){"use strict";n.r(t);var a=n("z7pX"),r=n("cpVT"),i=n("xvhg"),o=n("jT3O"),c=n("q1tI"),s=n.n(c),l=n("jRMg"),d=n("nOHt"),u=n.n(d),m=n("YFqc"),p=n.n(m),D=n("DFyN"),b=n("VreA"),f=n("iX8M"),I=n("6nGu"),g=n("gWdR"),v=n("7qI8"),y=n("B3WN"),h=n("TCCB"),x=n("wd/R"),N=n.n(x),k=n("z0WU"),O=n("qGs6"),w=n.n(O),P=n("qKvR"),E=n("FLf1"),j=n.n(E),A=n("D1Df"),C=n.n(A),R=n("33Fu"),T=n("tjd4"),S=(n("KRtS"),n("IGOO")),F=(n("FNPF"),n("2kOW")),H=n("YwrL"),V=(n("ojc3"),n("IqVg")),q=n("nyvF"),L=s.a.createElement;function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(){var e=Object(o.a)(['\n  display: block;\n  margin: 0 auto;\n  border-color: "#000";\n']);return Y=function(){return e},e}var B=Object(P.css)(Y());t.default=Object(D.a)((function(){var e=Object(l.c)(b.j),t=Object(i.a)(e,1)[0],n=Object(l.d)(f.o),r=Object(i.a)(n,1)[0],o=Object(c.useState)(!1),m=(o[0],o[1],Object(c.useState)(null)),D=m[0],x=m[1],O=Object(c.useState)(null),P=O[0],E=O[1],A=Object(d.useRouter)(),M=A.query.id,Y=Object(h.b)().userInformation,z=[{title:"Inicio",url:"/dashboard",last:!1},{title:"Buscar Orden",url:"/buscar-orden",last:!1},{title:"Detalle Orden",url:"".concat(M),last:!0}],G=function(e,t){var n=document.getElementById("canvas-".concat(e.id)).toDataURL("image/jpg",.3);switch(e.codigoEstudio){case"PCRC":case"PCRCS":return L(q.Z,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,qrValue:n,key:t});case"ELICOV":case"ELICOV":return L(q.T,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,qrValue:n,key:t});case"PPNI":return L(q.bb,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"PPNIE":return L(q.cb,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"FP":return L(q.W,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"FPOC":return L(q.V,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"FE":return L(q.v,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"CP":case"CA":case"CI":return L(q.P,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"CPRE":return L(q.p,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"CPPT":return L(q.Q,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"CPPT2":return L(q.R,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"DP":return L(q.S,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"VPH":return L(q.db,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"CHEB":return L(q.O,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"MT":return L(q.Y,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"HIV":return L(q.X,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"ARVI":return L(q.M,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"ARRAY":return L(q.h,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"TNE":return L(q.lb,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"TPB":return L(q.nb,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"TPA":return L(q.mb,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"R":return L(q.L,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"TXG":return L(q.ob,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"HSG":return L(q.E,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"PJ":return L(q.H,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"AN":return N()(e.fechaSolicitud).utc().isSameOrBefore("2021-11-25")?L(q.d,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t,qrValue:n}):L(q.e,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t,qrValue:n});case"ANT":return L(q.e,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t,qrValue:n});case"ASC":case"ANTU":case"AA":return L(q.i,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t,qrValue:n});case"AM":return L(q.c,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"ACGH":return L(q.b,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"EX":return L(q.t,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"FQ":return L(q.w,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"XF":return L(q.pb,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"PR":return L(q.J,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"PP":return L(q.I,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"BRNM":return L(q.j,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"CH":return L(q.m,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"HA":case"HBC":case"HBG":case"HCC":return L(q.y,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"EPD":return L(q.s,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"HCG":return L(q.y,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"COR":return L(q.o,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,qrValue:n,key:t});case"HO":return L(q.B,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"HR":return L(q.D,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"HPPP":return L(q.C,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"APA":return L(q.f,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"APP":return L(q.g,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"MUC":return L(q.F,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"HLA":return L(q.A,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"PRAE":return L(q.K,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"CMSS":return L(q.n,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"CUM":return L(q.q,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"HC":return L(q.z,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"DZC":return L(q.r,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"CAB":return L(q.k,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,qrValue:n,key:t});case"PAP":return L(q.G,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,qrValue:n,key:t});case"GHLA":return L(q.x,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"FH":case"FPE":return L(q.U,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"VPHG":return L(q.eb,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});case"PDM":return L(q.ab,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});default:if(H.i.includes(e.estudioID.id))return console.log("es un resultado simple"),L(q.kb,{estudio:_(_({},e),{},{ordenID:D}),paciente:D.clientID,key:t});console.log("NOT SUPPORTED "+e.codigoEstudio)}},U=function(){for(var e=[],t=P.filter((function(e){return"PROCESADO"===e.estadoEstudio})),n=function(){var n=H.h[r],a=t.filter((function(e){if(n===e.areaDeEstudioID.id&&!H.j.includes(e.estudioID.id))return e}));if(a.length>0){e.push(a);var o=function(){var e=a[i];t=t.filter((function(t){if(t.id!==e.id)return t}))};for(i=0;i<a.length;i++)o()}},r=0;r<H.h.length;r++){var i;n()}if(e.length>0){var o=function(e){return L(q.u,{estudios:e,orden:D,paciente:D.clientID})}(e),c=t.map((function(e,t){return G(e,t)}));Object(k.f)([].concat(Object(a.a)(c),[o]),D)}else{var s=t.map((function(e,t){return G(e,t)}));Object(k.f)(s,D)}};return Object(c.useEffect)((function(){A.query.id&&t({variables:{id:M}}).then((function(e){var t=e.data,n=e.error;if(n){var a="Hubo un error al crear el estudio.";n.graphQLErrors&&n.graphQLErrors.length>0&&n.graphQLErrors.map((function(e){a+="\n".concat(e.message," ")})),Object(V.a)("error",a)}if(!t.getOrden)return Object(V.a)("error","La Orden consultada no existe."),void u.a.push("/buscar-orden");t&&t.getOrdenDetalles&&E(t.getOrdenDetalles),t&&t.getOrden&&x(t.getOrden)}))}),[A.query]),D?L("div",null,L("div",{className:"w-full px-4"},L("div",{className:"flex flex-row mb-4"},L("div",{className:"w-full"},L(I.a,{items:z,home:!0,icon:"arrow"}))),L("div",{className:"w-full py-2 px-0"},L(g.a,{title:"",description:L("span",null,"Datos de la orden ",D.ordenNumero),right:L(F.a,{permission:H.f.UPDATE_ORDERS},L(p.a,{href:"/orden/edit/".concat(M)},L("a",{className:"link self-end"},"Editar Orden")))},L("div",{className:"flex flex-col lg:flex-row lg:flex-wrap w-full lg:space-x-4"},L("div",{className:"flex flex-col w-3/4"},L("div",{className:"text-sm mb-1"},"No. de Orden: ",D.ordenNumero),D.nombreMedico?L("div",{className:"text-sm mb-1"},"Medico Solicitante: ",D.nombreMedico):null,L("div",{className:"text-sm mb-1"},"Fecha Solicitud:"," ",N()(D.fechaSolicitud).utc().format("DD/MM/YYYY")),L(p.a,{href:"/proveedor/estudios/".concat(D.proveedorID.id),className:"text-sm mb-1"},L("div",{className:"text-sm mb-1"},"Tipo de Cliente:",L("a",{className:"link"}," ".concat(D.proveedorID.nombre)," ",D.contratista?"| ".concat(D.contratista):""))),L("div",{className:"text-sm mb-1"},"Lista de Sucursal: ",D.listaSucursal),L("div",{className:"text-sm mb-1"},"Total Pagado: ",D.totalAPagar),D.nota?L("div",{className:"text-sm mb-1"},"Nota/Informaci\xf3n clinica Relevante: ",D.nota):null),L("div",{className:"w-full mt-5"},L("button",{onClick:function(e){if("PARTICULAR"===D.proveedorID.tipo){var t=document.getElementById("canvas-".concat(D.id)).toDataURL("image/jpg",.3);Object(k.e)(D,P,t)}else Object(k.c)(D,P)},className:"inline-block px-6 py-1 mx-auto mb-3 text-xs font-medium leading-6 text-center text-white uppercase transition bg-blue-700 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-800 focus:outline-none"},"Descargar Recibo")),L("div",{className:"w-full mt-2"},L(F.a,{permission:H.f.DELETE_ORDERS},L("button",{onClick:function(e){Object(S.confirmAlert)({customUI:function(e){var t=e.onClose;return L(s.a.Fragment,null,L("div",{className:"modal-backdrop fade-in"}),L("div",{className:"modal show ","data-background":"light"},L("div",{className:"relative w-auto lg:my-4 mx-auto lg:max-w-lg max-w-sm"},L("div",{className:"bg-white text-gray-900 border-gray-200 dark:bg-gray-800 dark:text-white dark:border-gray-700 border-0 rounded-lg shadow-lg relative flex flex-col w-full outline-none"},L("div",{className:"relative p-4 flex-auto"},L("div",{className:"flex items-start justify-start p-2 space-x-4"},L("div",{className:"flex flex-col w-full"},L("div",{className:"text-lg mb-2 font-bold"},"\xbfEstas seguro que deseas eliminar la orden?")))),L("div",{className:"flex items-center justify-end p-4 border-t border-gray-200 dark:border-gray-700 border-solid rounded-b space-x-2"},L("button",{className:"btn btn-default btn-rounded bg-white hover:bg-gray-100 text-gray-900",type:"button",onClick:t},"Cancelar"),L("button",{className:"btn btn-default btn-rounded bg-red-500 hover:bg-red-600 text-white",type:"button",onClick:function(){t(),r({variables:{id:D.id}}).then((function(e){var t=e.data,n=e.error;if(n){console.log(n);var a="Hubo un error al tratar de eliminar la orden.";return n.graphQLErrors&&n.graphQLErrors.length>0&&n.graphQLErrors.map((function(e){a+="\n".concat(e.message," ")})),void Object(V.a)("error",a)}t.deleteOrden&&(Object(V.a)("success","La Orden fue eliminada correctamente."),A.push("/buscar-orden"))}))}},"Eliminar"))))))}})},className:"inline-block px-6 py-1 mx-auto mb-3 text-xs font-medium leading-6 text-center text-white uppercase transition bg-red-700 rounded-full shadow ripple hover:shadow-lg hover:bg-red-800 focus:outline-none"},"Eliminar Orden"))))),L(g.a,{title:"",description:L("span",null,"Datos del paciente"),right:L(F.a,{permission:H.f.UPDATE_PATIENTS},L(p.a,{href:"/pacientes/edit/".concat(D.clientID.id)},L("a",{className:"link self-end"},"Editar Paciente")))},L("div",{className:"flex flex-col lg:flex-row lg:flex-wrap w-full lg:space-x-4"},L("div",{className:"flex flex-col w-3/4"},L("div",{className:"text-sm mb-1"},"Nombres: ",D.clientID.nombres),L("div",{className:"text-sm mb-1"},"Apellidos: ",D.clientID.apellidos),L("div",{className:"text-sm mb-1"},"DNI: ",D.clientID.ci),D.clientID.fecha_nacimiento?L("div",{className:"text-sm mb-1"},"Fecha Nacimiento: ",D.clientID.fecha_nacimiento):null))),L(g.a,{title:"",description:L("span",null,"Datos Administrativos/Contables"),right:L(F.a,{permission:H.f.UPDATE_ORDERS},L(p.a,{href:"/orden/edit/".concat(M)},L("a",{className:"link self-end"},"Editar Orden")))},L("div",{className:"flex flex-col lg:flex-row lg:flex-wrap w-full lg:space-x-4"},L("div",{className:"flex flex-col w-3/4"},L("div",{className:"text-sm mb-1"},"No. de Orden: ",D.ordenNumero),L("div",{className:"text-sm mb-1"},"Total Pagado: ",D.totalAPagar),L("div",{className:"text-sm mb-1"},"Forma de Pago: ",D.formaDePago),D.referenciaDePago?L("div",{className:"text-sm mb-1"},"Referencia de Pago: ",D.referenciaDePago):null,D.estatusPago?L("div",{className:"text-sm mb-1"},"Estatus de Pago: ",D.estatusPago):null,D.NoFactura?L("div",{className:"text-sm mb-1"},"Factura #: ",D.NoFactura):null,D.fechaFactura?L("div",{className:"text-sm mb-1"},"Fecha Factura:"," ",N()(D.fechaFactura).format("DD/MM/YYYY")):null,D.fechaDePago?L("div",{className:"text-sm mb-1"},"Fecha de Pago:"," ",N()(D.fechaDePago).format("DD/MM/YYYY")):null,D.nroOrdenDeCompra?L("div",{className:"text-sm mb-1"},"Orden de compra # ",D.nroOrdenDeCompra):null,D.nroAutorizacion?L("div",{className:"text-sm mb-1"},"Numero de Autorizaci\xf3n: ",D.nroAutorizacion):null))),L(g.a,{title:"",description:L("span",null,"Estudios Realizados")},P.length>1?L("div",{className:"w-full mt-5"},L("button",{onClick:function(e){U()},className:"inline-block px-6 py-1 mx-auto mb-3 text-xs font-medium leading-6 text-center text-white uppercase transition bg-blue-700 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-800 focus:outline-none"},"Descargar Todos")):null,L("div",{className:"flex flex-col w-full"},L("div",{className:"overflow-x-scroll lg:overflow-hidden"},L("table",{className:"table"},L("thead",null,L("tr",null,L("th",null,"Nombre"),L("th",null,"C. Interno"),L("th",null,"Precio"),L("th",null,"Estatus"),L("th",null,"Acciones"))),L("tbody",null,P.map((function(e){var t=j.a.sign({ordenId:D.id},"Hnw5I!*GRV4thHlQSdA7r2YV*5uTSvpFDtAJztyu"),n="https://vigilant-goldberg-714272.netlify.app/resultados-orden?key=".concat(t);return L("tr",{key:e.id},L("td",null,e.estudioID.nombre),L("td",null,e.estudioID.codigoInterno),L("td",null,e.precio),L("td",null,e.estadoEstudio),L("td",null,L(p.a,{href:"/orden/edit/".concat(D.id,"/edit/").concat(e.id)},L("button",{className:"inline-block p-1 text-center mx-1 text-white transition bg-blue-500 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-600 focus:outline-none disabled:opacity-50"},L(R.b,{size:20}))),L(y.a,{size:"small",disabled:"PROCESADO"!==e.estadoEstudio,estudio:_(_({},e),{},{ordenID:{nombreMedico:D.nombreMedico}}),cliente:D.clientID,showConfirm:!0}),L(p.a,{href:"/processing/estudio/".concat(e.id)},L("button",{disabled:"doc"!==Y.role&&"super_admin"!==Y.role,className:"inline-block p-1 text-center mx-1 text-white transition bg-blue-500 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-600 focus:outline-none disabled:opacity-50"},L(T.a,{size:20}))),L("div",{style:{display:"none"}},L(C.a,{id:"canvas-".concat(D.id),value:n,size:128}))))}))))))),L(F.a,{permission:H.f.READ_ACTIVITY_LOGS},L(g.a,{title:"",description:L("span",null,"Historial")},L(v.a,{documentId:M,documentType:"ordenes"})))))):L("div",null,L("div",{className:"flex flex-row mb-4"},L("div",{className:"w-full"},L(I.a,{items:z,home:!0,icon:"arrow"}))),L("div",{className:"w-full px-4"},L("div",null,L(w.a,{css:B,size:80,color:"#000"}))))}))},FNPF:function(e,t,n){},IVkB:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/orden/detail/[id]",function(){return n("8apA")}])},gWdR:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a).a.createElement;t.a=function(e){var t=e.title,n=void 0===t?null:t,a=e.description,i=void 0===a?null:a,o=e.right,c=void 0===o?null:o,s=e.children;return r("div",{className:"widget w-full p-4 mb-4 rounded-lg bg-white border border-gray-100 dark:bg-gray-900 dark:border-gray-800"},(n||i||c)&&r("div",{className:"flex flex-row items-center justify-between mb-6"},r("div",{className:"flex flex-col"},r("div",{className:"text-sm font-light text-gray-500"},n),r("div",{className:"text-sm font-bold"},i)),c),s)}},z7pX:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("6FTQ");var r=n("8rE2");function i(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},[["IVkB",0,1,4,10,5,11,7,22,45,2,3,6,8,9,12,14,13,26,28,27]]]);