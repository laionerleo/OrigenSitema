_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[91],{"0Ap9":function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pacientes/edit/[id]",function(){return t("QTm1")}])},QTm1:function(e,r,t){"use strict";t.r(r);var i=t("cpVT"),a=t("xvhg"),s=t("jT3O"),o=t("nKUr"),c=t("q1tI"),n=t("jRMg"),d=t("nOHt"),l=t("DFyN"),u=t("iX8M"),f=t("VreA"),b=t("yP4a"),j=t("6nGu"),p=t("gWdR"),m=t("wd/R"),O=t.n(m),h=t("IqVg"),g=t("7qI8"),v=t("2kOW"),x=t("YwrL"),w=t("qGs6"),P=t.n(w),S=t("qKvR");function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function E(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){Object(i.a)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function R(){var e=Object(s.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: '#000';\n"]);return R=function(){return e},e}var T=Object(S.css)(R());r.default=Object(l.a)((function(){var e=Object(n.d)(u.t),r=Object(a.a)(e,1)[0],t=Object(n.c)(f.P),i=Object(a.a)(t,1)[0],s=Object(c.useState)(!1),l=s[0],m=s[1],w=Object(c.useState)(null),S=w[0],y=w[1],R=Object(c.useState)([]),U=R[0],z=R[1],_=Object(n.d)(u.k),D=Object(a.a)(_,1)[0],L=Object(n.d)(u.A),N=Object(a.a)(L,1)[0],Q=Object(n.c)(f.eb),q=Object(a.a)(Q,1)[0],Y=Object(c.useState)(null),C=Y[0],I=Y[1],V=Object(d.useRouter)(),k=V.query.id;Object(c.useEffect)((function(){var e,r;V.query.id&&(r=V.query.id,q({variables:{id:r}}).then((function(e){var r=e.data,t=e.error;if(r&&r.getVacunaByUser){var i=r.getVacunaByUser,a=i.id,s=i.dosisPrimera,o=i.dosisSegunda,c=i.dosisUnica,n=i.dosisRefuerzoPrimero,d=i.dosisRefuerzoSegundo,l=i.fechaUltimoTest,u=l?new Date(l):null,f=u?O()(u.toLocaleDateString("en-US")):null,b=f?f.format("DD-MM-YYYY"):"";I({id:a,dosisPrimera:s||"",dosisSegunda:o||"",dosisUnica:c||"",dosisRefuerzoPrimero:n||"",dosisRefuerzoSegundo:d||"",fechaUltimoTest:b})}t&&console.log(t)})),e=V.query.id,i({variables:{input:{id:e}}}).then((function(e){var r=e.data;if(e.error,r&&r.getClient){var t=r.getClient,i=t.direccion,a=t.apellidos,s=t.fecha_nacimiento,o=t.ci,c=t.departamento,n=t.edad,d=t.municipio,l=t.nombres,u=t.sexo,f=t.telefono,b=t.id,j=t.passport,p={direccion:i,apellidos:a,fecha_nacimiento:s?O()(s,"DD/MM/YYYY"):"",ci:o||"",passport:j||"",departamento:c,edad:n,municipio:d,nombres:l,sexo:u,telefono:f,id:b,dosisPrimera:C?C.dosisPrimera:"",dosisSegunda:C?C.dosisSegunda:"",dosisUnica:C?C.dosisUnica:"",dosisRefuerzoPrimero:C?C.dosisRefuerzoPrimero:"",dosisRefuerzoSegundo:C?C.dosisRefuerzoSegundo:"",fechaUltimoTest:C?C.fechaUltimoTest:""};y(p);var m=[];m.push({title:"Inicio",url:"/dashboard",last:!1}),m.push({title:"Gestion de pacientes",url:"/pacientes",last:!1}),m.push({title:"Edicion paciente ".concat(r.getClient.nombres," ").concat(r.getClient.apellidos),url:"".concat(r.getClient.id),last:!0}),z(m)}})))}),[V.query]);return S?Object(o.jsx)("div",{children:Object(o.jsxs)("div",{className:"w-full px-4",children:[Object(o.jsx)("div",{className:"flex flex-row mb-4",children:Object(o.jsx)("div",{className:"w-full",children:Object(o.jsx)(j.a,{items:U,home:!0,icon:"arrow"})})}),Object(o.jsxs)("div",{className:"w-full py-2 px-0",children:[Object(o.jsx)(p.a,{title:"",description:Object(o.jsx)("span",{children:"Datos del paciente"}),children:Object(o.jsx)("div",{className:"flex flex-col lg:flex-row lg:flex-wrap w-full lg:space-x-4",children:Object(o.jsx)(b.a,{paciente:E(E({},S),C),onSubmit:function(e,t){var i=E(E({},e),{},{id:k});m(!0),r({variables:{input:i}}).then((function(e){var r=e.data,i=e.error;if(r&&r.editClient){var a=t.dosisPrimera,s=t.dosisSegunda,o=t.dosisUnica,c=t.dosisRefuerzoPrimero,n=t.dosisRefuerzoSegundo,d=t.fechaUltimoTest,l=r.editClient.id;if(C){var u={id:C.id,dosisPrimera:a,dosisSegunda:s,dosisUnica:o,dosisRefuerzoPrimero:c,dosisRefuerzoSegundo:n,fechaUltimoTest:d};N({variables:{input:u}}).then((function(e){var r=e.data,t=e.error;if(r&&r.editVacuna&&(Object(h.a)("success","El paciente fue creado correctamente"),Object(h.a)("success","Los datos fueron actualizados correctamente"),setTimeout((function(){V.push("/pacientes/detalle/".concat(l))}),100)),t){var i="Hubo un error al crear el vacuna.";t.graphQLErrors&&t.graphQLErrors.length>0&&t.graphQLErrors.map((function(e){i+="\n".concat(e.message," ")})),Object(h.a)("error",i)}}))}else{var f={dosisPrimera:a,dosisSegunda:s,dosisUnica:o,dosisRefuerzoPrimero:c,dosisRefuerzoSegundo:n,fechaUltimoTest:d,clientID:S.id};D({variables:{input:f}}).then((function(e){var r=e.data,t=e.error;if(r&&r.addVacuna&&(Object(h.a)("success","El paciente fue creado correctamente"),Object(h.a)("success","Los datos fueron actualizados correctamente"),setTimeout((function(){V.push("/pacientes/detalle/".concat(l))}),100)),t){var i="Hubo un error al crear el vacuna.";t.graphQLErrors&&t.graphQLErrors.length>0&&t.graphQLErrors.map((function(e){i+="\n".concat(e.message," ")})),Object(h.a)("error",i)}}))}}if(i){console.log(i);var b="Hubo un problema al editar la informacion del paciente.";i.graphQLErrors&&i.graphQLErrors.length>0&&i.graphQLErrors.map((function(e){b+="\n".concat(e.message," ")})),Object(h.a)("error",b)}m(!1)}))},loading:l})})}),Object(o.jsx)(v.a,{permission:x.f.READ_ACTIVITY_LOGS,children:Object(o.jsx)(p.a,{title:"",description:Object(o.jsx)("span",{children:"Historial"}),children:Object(o.jsx)(g.a,{documentId:k,documentType:"clients"})})})]})]})}):Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"flex flex-row mb-4",children:Object(o.jsx)("div",{className:"w-full",children:Object(o.jsx)(j.a,{items:U,home:!0,icon:"arrow"})})}),Object(o.jsx)("div",{className:"w-full px-4",children:Object(o.jsx)("div",{children:Object(o.jsx)(P.a,{css:T,size:80,color:"#000"})})})]})}))}},[["0Ap9",0,1,4,10,5,11,7,2,3,6,8,9,12,14,13,15,16,17,18,27,40]]]);