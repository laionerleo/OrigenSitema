_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[90],{"0Ap9":function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pacientes/edit/[id]",function(){return t("QTm1")}])},QTm1:function(e,r,t){"use strict";t.r(r);var a=t("cpVT"),o=t("xvhg"),i=t("jT3O"),n=t("q1tI"),s=t.n(n),c=t("jRMg"),u=t("nOHt"),d=t("DFyN"),l=t("iX8M"),f=t("VreA"),p=t("yP4a"),m=t("6nGu"),b=t("gWdR"),g=t("wd/R"),O=t.n(g),v=t("IqVg"),h=t("7qI8"),j=t("2kOW"),w=t("YwrL"),P=t("qGs6"),y=t.n(P),S=t("qKvR"),E=s.a.createElement;function R(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function T(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?R(Object(t),!0).forEach((function(r){Object(a.a)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function z(){var e=Object(i.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: '#000';\n"]);return z=function(){return e},e}var U=Object(S.css)(z());r.default=Object(d.a)((function(){var e=Object(c.d)(l.t),r=Object(o.a)(e,1)[0],t=Object(c.c)(f.P),a=Object(o.a)(t,1)[0],i=Object(n.useState)(!1),s=i[0],d=i[1],g=Object(n.useState)(null),P=g[0],S=g[1],R=Object(n.useState)([]),z=R[0],_=R[1],x=Object(c.d)(l.k),D=Object(o.a)(x,1)[0],L=Object(c.d)(l.A),N=Object(o.a)(L,1)[0],Q=Object(c.c)(f.eb),q=Object(o.a)(Q,1)[0],Y=Object(n.useState)(null),V=Y[0],C=Y[1],I=Object(u.useRouter)(),k=I.query.id;Object(n.useEffect)((function(){var e,r;I.query.id&&(r=I.query.id,q({variables:{id:r}}).then((function(e){var r=e.data,t=e.error;if(r&&r.getVacunaByUser){var a=r.getVacunaByUser,o=a.id,i=a.dosisPrimera,n=a.dosisSegunda,s=a.dosisUnica,c=a.dosisRefuerzoPrimero,u=a.dosisRefuerzoSegundo,d=a.fechaUltimoTest,l=d?new Date(d):null,f=l?O()(l.toLocaleDateString("en-US")):null,p=f?f.format("DD-MM-YYYY"):"";C({id:o,dosisPrimera:i||"",dosisSegunda:n||"",dosisUnica:s||"",dosisRefuerzoPrimero:c||"",dosisRefuerzoSegundo:u||"",fechaUltimoTest:p})}t&&console.log(t)})),e=I.query.id,a({variables:{input:{id:e}}}).then((function(e){var r=e.data;if(e.error,r&&r.getClient){var t=r.getClient,a=t.direccion,o=t.apellidos,i=t.fecha_nacimiento,n=t.ci,s=t.departamento,c=t.edad,u=t.municipio,d=t.nombres,l=t.sexo,f=t.telefono,p=t.id,m=t.passport,b={direccion:a,apellidos:o,fecha_nacimiento:i?O()(i,"DD/MM/YYYY"):"",ci:n||"",passport:m||"",departamento:s,edad:c,municipio:u,nombres:d,sexo:l,telefono:f,id:p,dosisPrimera:V?V.dosisPrimera:"",dosisSegunda:V?V.dosisSegunda:"",dosisUnica:V?V.dosisUnica:"",dosisRefuerzoPrimero:V?V.dosisRefuerzoPrimero:"",dosisRefuerzoSegundo:V?V.dosisRefuerzoSegundo:"",fechaUltimoTest:V?V.fechaUltimoTest:""};S(b);var g=[];g.push({title:"Inicio",url:"/dashboard",last:!1}),g.push({title:"Gestion de pacientes",url:"/pacientes",last:!1}),g.push({title:"Edicion paciente ".concat(r.getClient.nombres," ").concat(r.getClient.apellidos),url:"".concat(r.getClient.id),last:!0}),_(g)}})))}),[I.query]);return P?E("div",null,E("div",{className:"w-full px-4"},E("div",{className:"flex flex-row mb-4"},E("div",{className:"w-full"},E(m.a,{items:z,home:!0,icon:"arrow"}))),E("div",{className:"w-full py-2 px-0"},E(b.a,{title:"",description:E("span",null,"Datos del paciente")},E("div",{className:"flex flex-col lg:flex-row lg:flex-wrap w-full lg:space-x-4"},E(p.a,{paciente:T(T({},P),V),onSubmit:function(e,t){var a=T(T({},e),{},{id:k});d(!0),r({variables:{input:a}}).then((function(e){var r=e.data,a=e.error;if(r&&r.editClient){var o=t.dosisPrimera,i=t.dosisSegunda,n=t.dosisUnica,s=t.dosisRefuerzoPrimero,c=t.dosisRefuerzoSegundo,u=t.fechaUltimoTest,l=r.editClient.id;if(V){var f={id:V.id,dosisPrimera:o,dosisSegunda:i,dosisUnica:n,dosisRefuerzoPrimero:s,dosisRefuerzoSegundo:c,fechaUltimoTest:u};N({variables:{input:f}}).then((function(e){var r=e.data,t=e.error;if(r&&r.editVacuna&&(Object(v.a)("success","El paciente fue creado correctamente"),Object(v.a)("success","Los datos fueron actualizados correctamente"),setTimeout((function(){I.push("/pacientes/detalle/".concat(l))}),100)),t){var a="Hubo un error al crear el vacuna.";t.graphQLErrors&&t.graphQLErrors.length>0&&t.graphQLErrors.map((function(e){a+="\n".concat(e.message," ")})),Object(v.a)("error",a)}}))}else{var p={dosisPrimera:o,dosisSegunda:i,dosisUnica:n,dosisRefuerzoPrimero:s,dosisRefuerzoSegundo:c,fechaUltimoTest:u,clientID:P.id};D({variables:{input:p}}).then((function(e){var r=e.data,t=e.error;if(r&&r.addVacuna&&(Object(v.a)("success","El paciente fue creado correctamente"),Object(v.a)("success","Los datos fueron actualizados correctamente"),setTimeout((function(){I.push("/pacientes/detalle/".concat(l))}),100)),t){var a="Hubo un error al crear el vacuna.";t.graphQLErrors&&t.graphQLErrors.length>0&&t.graphQLErrors.map((function(e){a+="\n".concat(e.message," ")})),Object(v.a)("error",a)}}))}}if(a){console.log(a);var m="Hubo un problema al editar la informacion del paciente.";a.graphQLErrors&&a.graphQLErrors.length>0&&a.graphQLErrors.map((function(e){m+="\n".concat(e.message," ")})),Object(v.a)("error",m)}d(!1)}))},loading:s}))),E(j.a,{permission:w.f.READ_ACTIVITY_LOGS},E(b.a,{title:"",description:E("span",null,"Historial")},E(h.a,{documentId:k,documentType:"clients"})))))):E("div",null,E("div",{className:"flex flex-row mb-4"},E("div",{className:"w-full"},E(m.a,{items:z,home:!0,icon:"arrow"}))),E("div",{className:"w-full px-4"},E("div",null,E(y.a,{css:U,size:80,color:"#000"}))))}))},cpVT:function(e,r,t){"use strict";function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}t.d(r,"a",(function(){return a}))}},[["0Ap9",0,1,4,10,5,11,7,2,3,6,8,9,12,14,13,15,16,17,18,27,39]]]);