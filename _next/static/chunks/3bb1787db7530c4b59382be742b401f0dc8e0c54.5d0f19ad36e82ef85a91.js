(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[37],{EA43:function(e,t,l){"use strict";var r=l("cpVT"),i=l("z7pX"),c=l("xvhg"),n=l("nKUr"),s=l("q1tI"),o=l("KYPV"),a=l("UGp+"),d=l("jRMg"),u=l("gWdR"),b=l("Cs6D"),j=l("9rZX"),m=l.n(j),p=l("IqVg"),h=l("VreA");function f(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)}return l}function x(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?f(Object(l),!0).forEach((function(t){Object(r.a)(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):f(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var O={nombre:"",estatus:"",estudios:[],tipo_cliente_selected:"",tipo_cliente:{}},v={estudio:"",precio:""},g={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",height:"50%",width:"50%",background:"transparent",padding:"10px",border:"none"},overlay:{background:"rgba(217, 218, 218, 0.8)"}};t.a=function(e){var t=e.perfil,l=e.onSubmit,r=e.loading,j=Object(s.useState)([]),f=j[0],w=j[1],N=Object(s.useState)(!1),y=N[0],C=N[1],E=Object(s.useState)(""),_=E[0],S=E[1],P=Object(s.useState)([]),V=P[0],k=P[1],A=Object(s.useState)(null),I=A[0],q=A[1],D=Object(d.c)(h.Y),F=Object(c.a)(D,1)[0],T=Object(d.c)(h.U),R=Object(c.a)(T,1)[0],z=Object(s.useState)([]),L=z[0],M=z[1],U=a.f({nombre:a.h().required("Este campo es requerido"),estatus:a.h().required("Este campo es requerido"),estudios:a.a().min(1),tipo_cliente_selected:a.h().required("Este campo es requerido"),tipo_cliente:a.f().required("Este campo es requerido")}),B=a.f({estudio:a.f().required("Este campo es requerido"),precio:a.e().required("Este campo es requerido")}),W=Object(o.b)({initialValues:t||O,validationSchema:U,onSubmit:l,validateOnMount:!!t,enableReinitialize:!0}),H=Object(o.b)({initialValues:v,validationSchema:B,onSubmit:function(e){var t=e.estudio,l=e.precio,r={nombre:t.estudioID.nombre,id:t.estudioID.id,precio:l.toString()};f.length>0?f.filter((function(e){return e.id===t.estudioID.id})).length>0?Object(p.a)("error","El estudio ya se encuentra en la lista."):(w([].concat(Object(i.a)(f),[r])),Object(p.a)("success","El estudio se agreg\xf3.")):(Object(p.a)("success","El estudio se agreg\xf3."),w([r]))}});Object(s.useEffect)((function(){W.setFieldValue("estudios",f)}),[f]),Object(s.useEffect)((function(){t&&(w(t.estudios),K(t.tipo_cliente_selected),X(t.tipo_cliente.id),q(t.tipo_cliente.id))}),[]);var K=function(e){F({variables:{tipo:e}}).then((function(e){var t=e.data;t.getProveedoresByTipo&&k(t.getProveedoresByTipo)}))},X=function(e){R({variables:{id:e}}).then((function(e){var t=e.data;e.error;t.getPreciosPorProveedor&&M(t.getPreciosPorProveedor)}))};return Object(n.jsxs)("form",{onSubmit:W.handleSubmit,className:"flex flex-col lg:flex-row lg:flex-wrap w-full",children:[Object(n.jsx)("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3",children:Object(n.jsxs)("div",{className:"form-element",children:[Object(n.jsx)("div",{className:"form-label",children:"Nombre"}),Object(n.jsx)("input",{name:"nombre",type:"text",className:"focus:outline-none form-input ".concat(W.errors.nombre?"form-input-invalid":""," "),placeholder:"",onChange:W.handleChange,value:W.values.nombre}),W.errors.nombre&&W.touched.nombre?Object(n.jsx)("div",{className:"form-error",children:W.errors.nombre}):null]})}),Object(n.jsx)("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3",children:Object(n.jsxs)("div",{className:"form-element",children:[Object(n.jsx)("div",{className:"form-label",children:"Estatus"}),Object(n.jsxs)("select",{className:"form-select spacing-4 ".concat(W.errors.estatus?"form-input-invalid":""),name:"estatus",placeholder:"Seleccione",onChange:W.handleChange,value:W.values.estatus,children:[Object(n.jsx)("option",{value:"",children:"Seleccione una opcion"}),Object(n.jsx)("option",{value:"ACTIVO",children:"ACTIVO"}),Object(n.jsx)("option",{value:"INACTIVO",children:"INACTIVO"})]}),W.errors.estatus&&W.touched.estatus?Object(n.jsx)("div",{className:"form-error",children:W.errors.estatus}):null]})}),Object(n.jsx)("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3",children:Object(n.jsxs)("div",{className:"form-element",children:[Object(n.jsx)("div",{className:"form-label",children:"Tipo de cliente"}),Object(n.jsxs)("select",{className:"form-select",name:"tipo_cliente_selected",placeholder:"Seleccione",onChange:function(e){W.handleChange(e),q(null),K(e.target.value),W.setFieldValue("tipo_cliente",{}),W.setFieldValue("estudios",[]),w([])},value:W.values.tipo_cliente_selected,children:[Object(n.jsx)("option",{value:"",children:"Seleccione una opcion"}),Object(n.jsx)("option",{value:"PARTICULAR",children:"Particular"}),Object(n.jsx)("option",{value:"EMPRESA",children:"Empresa"}),Object(n.jsx)("option",{value:"MEDICO",children:"Medico"}),Object(n.jsx)("option",{value:"CONVENIO",children:"Convenio"})]}),W.errors.tipo_cliente_selected&&W.touched.tipo_cliente_selected?Object(n.jsx)("div",{className:"form-error",children:W.errors.tipo_cliente_selected}):null]})}),W.values.tipo_cliente_selected?Object(n.jsx)("div",{className:"w-2/4 mt-3 pl-3",children:Object(n.jsxs)("div",{className:"form-element",children:[Object(n.jsxs)("div",{className:"form-label",children:["Lista de ",W.values.tipo_cliente_selected,"S "]}),Object(n.jsx)(b.a,{name:"tipo_cliente",options:V,getOptionLabel:function(e){return e.nombre},getOptionValue:function(e){return e.id},onChange:function(e){W.values.tipo_cliente!==e&&(X(e.id),W.setFieldValue("estudios",[]),w([]),W.setFieldValue("tipo_cliente",e),q(e.id),H.setFieldValue("estudio",{}))},value:W.values.tipo_cliente})]})}):null,I&&L.length>0?Object(n.jsxs)(u.a,{title:"",description:Object(n.jsx)("span",{children:"A\xf1adir Estudio y Precio"}),children:[Object(n.jsx)("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-2/5 pl-3",children:Object(n.jsxs)("div",{className:"form-element",children:[Object(n.jsx)("div",{className:"form-label",children:"Lista Estudios"}),Object(n.jsx)(b.a,{name:"estudio",placeholder:"Seleccione",options:L,getOptionLabel:function(e){return e.estudioID.nombre},getOptionValue:function(e){return e.id},value:H.estudio,onChange:function(e){e?(H.setFieldValue("estudio",e),H.setFieldValue("precio",e.precio)):(H.setFieldValue("estudio",{}),H.setFieldValue("precio",0))}}),H.errors.estudio&&H.touched.estudio?Object(n.jsx)("div",{className:"form-error",children:H.errors.estudio}):null]})}),Object(n.jsx)("div",{className:"w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3",children:Object(n.jsxs)("div",{className:"form-element",children:[Object(n.jsx)("div",{className:"form-label",children:"Precio"}),Object(n.jsx)("input",{name:"precio",type:"number",className:"focus:outline-none form-input ".concat(H.errors.precio?"form-input-invalid":""," "),placeholder:"",onChange:H.handleChange,value:H.values.precio}),H.errors.precio&&H.touched.precio?Object(n.jsx)("div",{className:"form-error",children:H.errors.precio}):null]})}),Object(n.jsx)("div",{className:"flex w-full sm:w-full md:w-full lg:w-2/4 xl:w-1/4 pl-3 justify-start mt-2",children:Object(n.jsx)("div",{className:"my-auto",children:Object(n.jsx)("button",{className:"inline-block px-6 py-2 my-2 text-xs font-medium leading-6 text-center text-white uppercase transition bg-blue-700 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-800 focus:outline-none mx-auto",type:"button",onClick:H.handleSubmit,children:"Agregar"})})})]}):null,Object(n.jsx)(u.a,{title:"",description:Object(n.jsx)("span",{children:"Lista de Estudios en Perfil "}),children:f.length>0?Object(n.jsx)("div",{className:"flex flex-col w-full",children:Object(n.jsx)("div",{className:"overflow-x-scroll lg:overflow-hidden",children:Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Estudio"}),Object(n.jsx)("th",{children:"Precio"}),Object(n.jsx)("th",{children:"Acciones"})]})}),Object(n.jsx)("tbody",{children:f.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.nombre}),Object(n.jsx)("td",{children:e.precio}),Object(n.jsxs)("td",{children:[Object(n.jsx)("a",{onClick:function(t){S(e),C(!0)},children:"Editar"})," | ",Object(n.jsx)("a",{onClick:function(e){return function(e){var t=Object(i.a)(f);t.splice(e,1),w(t)}(t)},children:"Eliminar"})]})]},t)}))})]})})}):Object(n.jsx)("h5",{className:"text-center",children:"Aun no hay estudios seleccionados."})}),Object(n.jsx)("div",{className:"w-full flex",children:Object(n.jsx)("div",{className:"m-auto",children:Object(n.jsxs)("button",{className:"inline-block px-6 py-2 my-6 text-xs font-medium leading-6 text-center text-white uppercase transition bg-blue-700 rounded-full shadow ripple hover:shadow-lg hover:bg-blue-800 focus:outline-none mx-auto",type:"submit",children:[r?Object(n.jsxs)("svg",{className:" inline-block animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Object(n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,t?"Actualizar":"Crear"]})})}),Object(n.jsx)(m.a,{isOpen:y,onRequestClose:function(){return C(!y)},style:g,contentLabel:"Example Modal",ariaHideApp:!1,shouldCloseOnOverlayClick:!1,children:Object(n.jsx)("div",{className:"relative w-auto lg:my-4 mx-auto lg:max-w-lg max-w-sm",children:Object(n.jsxs)("div",{className:"bg-white text-gray-900 border-gray-200 dark:bg-gray-800 dark:text-white dark:border-gray-700 border-0 rounded-lg shadow-lg relative flex flex-col w-full outline-none",children:[Object(n.jsxs)("div",{className:"relative p-4 flex-auto",children:[Object(n.jsx)("div",{className:"flex items-start justify-start p-2 space-x-4",children:Object(n.jsx)("div",{className:"flex flex-col w-full",children:Object(n.jsx)("div",{className:"text-md mb-2 font-bold",children:"Ingrese el precio actualizado"})})}),Object(n.jsx)("div",{className:"w-full pl-3",children:Object(n.jsxs)("div",{className:"form-element",children:[Object(n.jsx)("div",{className:"form-label",children:"Precio"}),Object(n.jsx)("input",{name:"precioEdit",type:"number",className:"focus:outline-none form-input ".concat(_.precio?"":"form-input-invalid"," "),placeholder:"",onChange:function(e){S(x(x({},_),{},{precio:e.target.value}))},value:_.precio})]})})]}),Object(n.jsxs)("div",{className:"flex items-center justify-end p-4 border-t border-gray-200 dark:border-gray-700 border-solid rounded-b space-x-2",children:[Object(n.jsx)("button",{className:"btn btn-default btn-rounded bg-white hover:bg-gray-100 text-gray-900",type:"button",onClick:function(e){return C(!y)},children:"Cancelar"}),Object(n.jsx)("button",{className:"btn btn-default btn-rounded bg-yellow-500 hover:bg-yellow-600 text-white",type:"button",onClick:function(){_.precio?function(e){var t=f.map((function(t){return t.id===e.id?e:t}));C(!1),w(t)}(_):Object(p.a)("error","El precio no puede estar vacio")},children:"Actualizar"})]})]})})})]})}},IqVg:function(e,t,l){"use strict";l.d(t,"a",(function(){return i}));l("wd/R");var r=l("FGyW"),i=(l("jDDT"),function(e,t){r.b[e](t,{position:"top-right",autoClose:"error"===e?4e3:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0})})},gWdR:function(e,t,l){"use strict";var r=l("nKUr");t.a=function(e){var t=e.title,l=void 0===t?null:t,i=e.description,c=void 0===i?null:i,n=e.right,s=void 0===n?null:n,o=e.children;return Object(r.jsxs)("div",{className:"widget w-full p-4 mb-4 rounded-lg bg-white border border-gray-100 dark:bg-gray-900 dark:border-gray-800",children:[(l||c||s)&&Object(r.jsxs)("div",{className:"flex flex-row items-center justify-between mb-6",children:[Object(r.jsxs)("div",{className:"flex flex-col",children:[Object(r.jsx)("div",{className:"text-sm font-light text-gray-500",children:l}),Object(r.jsx)("div",{className:"text-sm font-bold",children:c})]}),s]}),o]})}},z7pX:function(e,t,l){"use strict";l.d(t,"a",(function(){return c}));var r=l("6FTQ");var i=l("8rE2");function c(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);